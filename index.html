<!DOCTYPE html>
<html>
  <head>
    <title>Colorado Legislature DP</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- Load Esri Leaflet from CDN 
    <script src="https://unpkg.com/esri-leaflet/dist/esri-leaflet.js"></script> -->

    <script src="js/classyJenks.js"></script>
    <script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>

  <!-- Load geojson file from https://github.com/Tejaswini21nalla/LeafletMap -->
    <script src="js/cd.js"></script>
    <script src="js/sldl.js"></script>
    <script src="js/sldu.js"></script>
    <!--<script src="js/cd_data.js"></script>
    <script src="js/sldl_data.js"></script>
    <script src="js/sldu_data.js"></script>
    <script src="js/cd_sf1.js"></script>
    <script src="js/sldl_sf1.js"></script>
    <script src="js/sldu_sf1.js"></script>
    <script src="js/cd_dp.js"></script>
    <script src="js/sldl_dp.js"></script>
    <script src="js/sldu_dp.js"></script>
  <!-- <script src="shapefiles/tl_2012_06_sldl.js"></script> -->

    <style>
      html, body{
          margin:0; padding:0;  width : 100%; height : 100%;
          background: black; 
          font-family: "Source Sans Pro", sans-serif;
      }

      #top{
        margin-bottom: 15px;
      }

      #map{
        height: 85vh;
      }

      #mapLabel {
        z-index: 1000;
        position: absolute;
        width: 15%;
        top: 90%;
        left: 25%;
      }

      #pullDown {
        z-index: 1000;
        /* position: absolute; 
        width: 15%;*/
        top: 5%;
        right:0%;
        text-align: right;
      }

      #pullDownGeo {
        z-index: 1000;
        /* position: absolute; 
        width: 15%;*/
        top: 5%;
        left:0%;
        text-align: right;
      }
        
      #header{
        color: #BDBDBD;
        text-align: center;
        margin-bottom: 0;
      }

      .column {
        float: left;
        height: 90vh;
      }

      .left {
        width: 40%;
        margin-left: 25px;
      }
      .right {
        width: 50%;
        padding-left: 25px;
        margin-left: 20px;
      }
      /* Clear floats after the columns */
      .row:after {
          content: "";
          display: table;
          clear: both;
      }
      .legend {
          text-align: right;
          line-height: 18px;
          color: #555;
          /* background: lightgray; */
		  }
      .legend i {
          width: 24px;
          height: 14px;
          float: left;
          margin-right: 8px;
          opacity: 0.7;
      }
      .info {
          padding: 6px 8px;
          /* font: 14px/16px Arial, Helvetica, sans-serif;*/
          color: #BDBDBD ;
          box-shadow: 0 0 15px rgba(0,0,0,0.2);
          border-radius: 5px;
		  }
      #graph {
        height: 100%;
      }
      #sf1Bar, #dpBar, #diffBar {
        height: 25vh;
        width: 100%;
      }
      /* #dpBar {
        height: 45vh;
        width: 100%;
      }*/
      .barText, .lblText {
        fill: #BDBDBD ;
      }
      .axis{
        color: #BDBDBD;
      }
      .bar.positive {
        fill: steelblue;
      }
      .bar.negative {
        fill: brown;
      }

    </style>
  </head>
  <body>
  <div id='top'>
    <h3 id="header">Differential Privacy (4/28 12_2 Flight) and 2010 Census Summary File 1: Colorado Districts</h3>
  </div>

  <div class='row'>
    <div id="mapContainer" class = 'column left'>
      <div id="pullDownGeo">
        <p style="margin-bottom: 0; color: #BDBDBD; ">Districts</p>
        <div class=menu >
            <select name="distType" id="districtType"> 
                <option value="cd">Congressional</option>
                <option value="sldu">State Senate</option>
                <option value="sldl">State House</option>
            </select> 
        </div> 
      </div>
      <div id="pullDown">
        <p style="margin-bottom: 0; color: #BDBDBD; ">Race/Ethnicity</p>
        <div class=menu >
            <select name="raceEth" id="raceEthnicity"> 
                <option value="tp">Total Population 18+</option>
                <option value="hisp">Hispanic, Any Race</option>
                <option value="wnh">White Non-Hispanic</option>
                <option value="bnh">Black Non-Hispanic</option>
                <option value="aiannh">American Indian and Native Alaskan Non-Hispanic</option>
                <option value="anh">Asian Non-Hispanic</option>
                <option value="nhpinh">Native Hawaiian and Pacific Islander Non-Hispanic</option>
                <option value="onh">Other Non-Hispanic</option>
                <option value="tomnh">Two or More Races Non-Hispanic</option>
            </select> 
        </div> 
      </div>
      <div id='map'></div>
      <div id="mapLabel">
        <p style="color: #BDBDBD; font-size: 12px;">Click on a district to view the population distribution by race/ethnicity for that district. Click outside the Colorado map to reset.</p>
      </div>
    </div>

    <div id="rtSide" class = 'column right'>
      <div id="graph">
        <p id="sf1Tag" style="color:#BDBDBD; margin-bottom: 5px;">SF1 - Population 18 Years And Over by Race - Colorado</p>
        <div id="sf1Bar"></div>        
        <p id="dpTag" style="color:#BDBDBD; margin-top: 0; margin-bottom: 5px;">Differential Privacy - Population 18 Years And Over by Race - Colorado</p>
        <div id="dpBar"></div>    
          <p id="chgTag" style="color:#BDBDBD; margin-top: 0; margin-bottom: 0;">Difference (DP - SF1) - Population 18 Years And Over by Race - Colorado</p>
          <p id="chgTotal" style="margin:0"></p>
        <div id="diffBar"></div>   
      </div>
    </div>

  </div>

    <script>
        
        //***********************************************data*************************************
        
var cd_data = [
 {
   dist: '01',
   chg: 52,
   hisp: 93,
   whitenh: -95,
   blacknh: 40,
   aiannh: -49,
   asiannh: 2,
   nhopinh: 5,
   othernh: 18,
   twoplusnh: 38
 },
 {
   dist: '02',
   chg: -150,
   hisp: 170,
   whitenh: -2,
   blacknh: -70,
   aiannh: 36,
   asiannh: 131,
   nhopinh: 64,
   othernh: -54,
   twoplusnh: -425
 },
 {
   dist: '03',
   chg: -21,
   hisp: -194,
   whitenh: -81,
   blacknh: -13,
   aiannh: 8,
   asiannh: -5,
   nhopinh: 49,
   othernh: 2,
   twoplusnh: 213
 },
 {
   dist: '04',
   chg: -183,
   hisp: -221,
   whitenh: 94,
   blacknh: -5,
   aiannh: -90,
   asiannh: -89,
   nhopinh: -31,
   othernh: 21,
   twoplusnh: 138
 },
 {
   dist: '05',
   chg: 82,
   hisp: -105,
   whitenh: 93,
   blacknh: -10,
   aiannh: 24,
   asiannh: -1,
   nhopinh: 11,
   othernh: 12,
   twoplusnh: 58
 },
 {
   dist: '06',
   chg: 898,
   hisp: 664,
   whitenh: 117,
   blacknh: 35,
   aiannh: 101,
   asiannh: -22,
   nhopinh: 8,
   othernh: -72,
   twoplusnh: 67
 },
 {
   dist: '07',
   chg: -678,
   hisp: -442,
   whitenh: -119,
   blacknh: 5,
   aiannh: -5,
   asiannh: -8,
   nhopinh: -80,
   othernh: 91,
   twoplusnh: -120
 }
];
        
var cd_sf1 = [
 {
   dist: '01',
   hisp: 203543,
   whitenh: 354652,
   blacknh: 62071,
   aiannh: 3919,
   asiannh: 21880,
   nhopinh: 562,
   othernh: 1332,
   twoplusnh: 14080
 },
 {
   dist: '02',
   hisp: 149228,
   whitenh: 531504,
   blacknh: 7523,
   aiannh: 3055,
   asiannh: 28260,
   nhopinh: 506,
   othernh: 1120,
   twoplusnh: 12609
 },
 {
   dist: '03',
   hisp: 170957,
   whitenh: 505335,
   blacknh: 5034,
   aiannh: 9357,
   asiannh: 4535,
   nhopinh: 467,
   othernh: 900,
   twoplusnh: 9601
 },
 {
   dist: '04',
   hisp: 146527,
   whitenh: 543865,
   blacknh: 8128,
   aiannh: 3754,
   asiannh: 11024,
   nhopinh: 427,
   othernh: 863,
   twoplusnh: 10453
 },
 {
   dist: '05',
   hisp: 105677,
   whitenh: 534072,
   blacknh: 38016,
   aiannh: 4793,
   asiannh: 17101,
   nhopinh: 1960,
   othernh: 1218,
   twoplusnh: 23065
 },
 {
   dist: '06',
   hisp: 69786,
   whitenh: 653030,
   blacknh: 21920,
   aiannh: 2609,
   asiannh: 31756,
   nhopinh: 691,
   othernh: 1141,
   twoplusnh: 16880
 },
 {
   dist: '07',
   hisp: 192969,
   whitenh: 398335,
   blacknh: 46086,
   aiannh: 3757,
   asiannh: 21008,
   nhopinh: 1048,
   othernh: 1048,
   twoplusnh: 14159
 }, 
 {
   dist: 'CO',
   hisp: 664462,
   whitenh: 2810513,
   blacknh: 138811,
   aiannh: 23946,
   asiannh: 103339,
   nhopinh: 4104,
   othernh: 4850,
   twoplusnh: 53562
 }
];
        
var cd_dp = [
 {
   dist: '01',
   hisp: 203636,
   whitenh: 354557,
   blacknh: 62111,
   aiannh: 3870,
   asiannh: 21882,
   nhopinh: 567,
   othernh: 1350,
   twoplusnh: 14118
 },
 {
   dist: '02',
   hisp: 149398,
   whitenh: 531502,
   blacknh: 7453,
   aiannh: 3091,
   asiannh: 28391,
   nhopinh: 570,
   othernh: 1066,
   twoplusnh: 12184
 },
 {
   dist: '03',
   hisp: 170763,
   whitenh: 505254,
   blacknh: 5021,
   aiannh: 9365,
   asiannh: 4530,
   nhopinh: 516,
   othernh: 902,
   twoplusnh: 9814
 },
 {
   dist: '04',
   hisp: 146306,
   whitenh: 543959,
   blacknh: 8123,
   aiannh: 3664,
   asiannh: 10935,
   nhopinh: 396,
   othernh: 884,
   twoplusnh: 10591
 },
 {
   dist: '05',
   hisp: 105572,
   whitenh: 534165,
   blacknh: 38006,
   aiannh: 4817,
   asiannh: 17100,
   nhopinh: 1971,
   othernh: 1230,
   twoplusnh: 23123
 },
 {
   dist: '06',
   hisp: 70450,
   whitenh: 653147,
   blacknh: 21955,
   aiannh: 2710,
   asiannh: 31734,
   nhopinh: 699,
   othernh: 1069,
   twoplusnh: 16947
 },
 {
   dist: '07',
   hisp: 192527,
   whitenh: 398216,
   blacknh: 46091,
   aiannh: 3752,
   asiannh: 21000,
   nhopinh: 968,
   othernh: 1139,
   twoplusnh: 14039
 },
 {
   dist: 'CO',
   hisp: 1038652,
   whitenh: 3520800,
   blacknh: 188760,
   aiannh: 31269,
   asiannh: 135572,
   nhopinh: 5687,
   othernh: 7640,
   twoplusnh: 100816
 }
];

 var sdlu_data = [
 {
   dist: '1',
   chg: 8,
   hisp: -8,
   whitenh: -28,
   blacknh: -23,
   aiannh: -3,
   asiannh: -34,
   nhopinh: -15,
   othernh: -8,
   twoplusnh: 127
 },
 {
   dist: '2',
   chg: 93,
   hisp: 53,
   whitenh: 40,
   blacknh: 1,
   aiannh: -62,
   asiannh: -10,
   nhopinh: 5,
   othernh: -16,
   twoplusnh: 82
 },
 {
   dist: '3',
   chg: -95,
   hisp: 20,
   whitenh: -73,
   blacknh: 0,
   aiannh: -61,
   asiannh: 28,
   nhopinh: 2,
   othernh: -12,
   twoplusnh: 1
 },
 {
   dist: '4',
   chg: 108,
   hisp: 50,
   whitenh: 51,
   blacknh: 5,
   aiannh: 12,
   asiannh: 19,
   nhopinh: -26,
   othernh: -15,
   twoplusnh: 12
 },
 {
   dist: '5',
   chg: 5,
   hisp: 41,
   whitenh: -116,
   blacknh: 3,
   aiannh: -4,
   asiannh: -27,
   nhopinh: 18,
   othernh: -1,
   twoplusnh: 91
 },
 {
   dist: '6',
   chg: 5,
   hisp: -239,
   whitenh: 0,
   blacknh: -8,
   aiannh: 80,
   asiannh: 17,
   nhopinh: 12,
   othernh: 17,
   twoplusnh: 126
 },
 {
   dist: '7',
   chg: -73,
   hisp: -49,
   whitenh: 31,
   blacknh: -10,
   aiannh: 11,
   asiannh: 0,
   nhopinh: 5,
   othernh: -10,
   twoplusnh: -51
 },
 {
   dist: '8',
   chg: 53,
   hisp: -5,
   whitenh: 56,
   blacknh: -21,
   aiannh: 17,
   asiannh: -24,
   nhopinh: 1,
   othernh: 21,
   twoplusnh: 8
 },
 {
   dist: '9',
   chg: 208,
   hisp: 130,
   whitenh: 39,
   blacknh: 2,
   aiannh: 8,
   asiannh: -55,
   nhopinh: 24,
   othernh: -57,
   twoplusnh: 117
 },
 {
   dist: '10',
   chg: 128,
   hisp: -24,
   whitenh: 19,
   blacknh: 99,
   aiannh: 3,
   asiannh: -5,
   nhopinh: -4,
   othernh: 32,
   twoplusnh: 8
 },
 {
   dist: '11',
   chg: -67,
   hisp: -152,
   whitenh: 9,
   blacknh: -117,
   aiannh: 17,
   asiannh: 45,
   nhopinh: 9,
   othernh: 60,
   twoplusnh: 62
 },
 {
   dist: '12',
   chg: -271,
   hisp: -78,
   whitenh: -43,
   blacknh: 12,
   aiannh: 10,
   asiannh: -10,
   nhopinh: 2,
   othernh: -34,
   twoplusnh: -130
 },
 {
   dist: '13',
   chg: -18,
   hisp: -24,
   whitenh: -6,
   blacknh: -3,
   aiannh: -31,
   asiannh: 4,
   nhopinh: -9,
   othernh: 11,
   twoplusnh: 40
 },
 {
   dist: '14',
   chg: 200,
   hisp: 96,
   whitenh: 50,
   blacknh: 12,
   aiannh: -36,
   asiannh: 69,
   nhopinh: 7,
   othernh: 16,
   twoplusnh: -14
 },
 {
   dist: '15',
   chg: -202,
   hisp: -80,
   whitenh: 11,
   blacknh: -13,
   aiannh: 30,
   asiannh: -77,
   nhopinh: -10,
   othernh: -7,
   twoplusnh: -56
 },
 {
   dist: '16',
   chg: 303,
   hisp: 287,
   whitenh: -46,
   blacknh: 0,
   aiannh: 20,
   asiannh: -41,
   nhopinh: 16,
   othernh: 35,
   twoplusnh: 32
 },
 {
   dist: '17',
   chg: -272,
   hisp: -197,
   whitenh: -34,
   blacknh: 4,
   aiannh: -28,
   asiannh: -21,
   nhopinh: -4,
   othernh: 3,
   twoplusnh: 5
 },
 {
   dist: '18',
   chg: 128,
   hisp: 121,
   whitenh: 76,
   blacknh: 3,
   aiannh: -15,
   asiannh: 17,
   nhopinh: -4,
   othernh: -7,
   twoplusnh: -63
 },
 {
   dist: '19',
   chg: -117,
   hisp: -111,
   whitenh: 45,
   blacknh: -3,
   aiannh: -25,
   asiannh: 48,
   nhopinh: 13,
   othernh: 30,
   twoplusnh: -114
 },
 {
   dist: '20',
   chg: -160,
   hisp: -190,
   whitenh: 45,
   blacknh: 28,
   aiannh: -8,
   asiannh: 3,
   nhopinh: -9,
   othernh: -4,
   twoplusnh: -25
 },
 {
   dist: '21',
   chg: -203,
   hisp: -83,
   whitenh: -157,
   blacknh: 2,
   aiannh: 20,
   asiannh: 39,
   nhopinh: -14,
   othernh: -18,
   twoplusnh: 8
 },
 {
   dist: '22',
   chg: 291,
   hisp: 247,
   whitenh: 73,
   blacknh: -56,
   aiannh: 25,
   asiannh: -36,
   nhopinh: -8,
   othernh: -34,
   twoplusnh: 80
 },
 {
   dist: '23',
   chg: 132,
   hisp: 202,
   whitenh: 4,
   blacknh: 23,
   aiannh: -12,
   asiannh: 9,
   nhopinh: 13,
   othernh: -3,
   twoplusnh: -104
 },
 {
   dist: '24',
   chg: -234,
   hisp: -252,
   whitenh: 52,
   blacknh: -21,
   aiannh: -35,
   asiannh: 40,
   nhopinh: 5,
   othernh: -22,
   twoplusnh: -1
 },
 {
   dist: '25',
   chg: 122,
   hisp: 210,
   whitenh: -68,
   blacknh: -11,
   aiannh: 46,
   asiannh: -32,
   nhopinh: -33,
   othernh: 22,
   twoplusnh: -12
 },
 {
   dist: '26',
   chg: 771,
   hisp: 243,
   whitenh: 71,
   blacknh: 44,
   aiannh: 5,
   asiannh: -31,
   nhopinh: 4,
   othernh: 35,
   twoplusnh: 400
 },
 {
   dist: '27',
   chg: 233,
   hisp: 258,
   whitenh: 10,
   blacknh: -18,
   aiannh: 60,
   asiannh: 21,
   nhopinh: 31,
   othernh: -41,
   twoplusnh: -88
 },
 {
   dist: '28',
   chg: -585,
   hisp: -352,
   whitenh: -39,
   blacknh: 37,
   aiannh: -20,
   asiannh: 62,
   nhopinh: 0,
   othernh: -29,
   twoplusnh: -244
 },
 {
   dist: '29',
   chg: -474,
   hisp: -245,
   whitenh: -13,
   blacknh: -14,
   aiannh: -3,
   asiannh: -50,
   nhopinh: -44,
   othernh: 36,
   twoplusnh: -141
 },
 {
   dist: '30',
   chg: -111,
   hisp: -97,
   whitenh: 52,
   blacknh: 6,
   aiannh: -3,
   asiannh: 31,
   nhopinh: 21,
   othernh: 16,
   twoplusnh: -137
 },
 {
   dist: '31',
   chg: 319,
   hisp: 232,
   whitenh: 12,
   blacknh: -25,
   aiannh: 9,
   asiannh: 41,
   nhopinh: 6,
   othernh: 24,
   twoplusnh: 20
 },
 {
   dist: '32',
   chg: 336,
   hisp: 229,
   whitenh: 85,
   blacknh: 21,
   aiannh: -20,
   asiannh: -24,
   nhopinh: 16,
   othernh: 0,
   twoplusnh: 29
 },
 {
   dist: '33',
   chg: -707,
   hisp: -181,
   whitenh: -137,
   blacknh: 27,
   aiannh: -12,
   asiannh: -3,
   nhopinh: -17,
   othernh: 22,
   twoplusnh: -406
 },
 {
   dist: '34',
   chg: -89,
   hisp: -200,
   whitenh: -121,
   blacknh: -11,
   aiannh: -1,
   asiannh: 3,
   nhopinh: -2,
   othernh: -15,
   twoplusnh: 258
 },
 {
   dist: '35',
   chg: 235,
   hisp: 113,
   whitenh: 57,
   blacknh: 7,
   aiannh: 31,
   asiannh: -8,
   nhopinh: 15,
   othernh: -29,
   twoplusnh: 49
 },
 {
   dist: 'CO',
   chg: 0,
   hisp: -35,
   whitenh: 7,
   blacknh: -18,
   aiannh: 25,
   asiannh: 8,
   nhopinh: 26,
   othernh: 18,
   twoplusnh: -31
 }
];
        
 var sdlu_sf1 =        [
 {
   dist: '1',
   hisp: 24835,
   whitenh: 95280,
   blacknh: 2423,
   aiannh: 631,
   asiannh: 612,
   nhopinh: 64,
   othernh: 100,
   twoplusnh: 1209
 },
 {
   dist: '2',
   hisp: 30749,
   whitenh: 87682,
   blacknh: 3285,
   aiannh: 1359,
   asiannh: 717,
   nhopinh: 51,
   othernh: 104,
   twoplusnh: 1465
 },
 {
   dist: '3',
   hisp: 61461,
   whitenh: 73646,
   blacknh: 2583,
   aiannh: 891,
   asiannh: 1069,
   nhopinh: 101,
   othernh: 242,
   twoplusnh: 1896
 },
 {
   dist: '4',
   hisp: 14092,
   whitenh: 157764,
   blacknh: 1511,
   aiannh: 764,
   asiannh: 2649,
   nhopinh: 118,
   othernh: 290,
   twoplusnh: 3334
 },
 {
   dist: '5',
   hisp: 30479,
   whitenh: 93541,
   blacknh: 728,
   aiannh: 812,
   asiannh: 821,
   nhopinh: 47,
   othernh: 174,
   twoplusnh: 1501
 },
 {
   dist: '6',
   hisp: 20141,
   whitenh: 114977,
   blacknh: 402,
   aiannh: 5950,
   asiannh: 785,
   nhopinh: 81,
   othernh: 171,
   twoplusnh: 2280
 },
 {
   dist: '7',
   hisp: 20800,
   whitenh: 125803,
   blacknh: 787,
   aiannh: 974,
   asiannh: 1081,
   nhopinh: 158,
   othernh: 141,
   twoplusnh: 2300
 },
 {
   dist: '8',
   hisp: 34819,
   whitenh: 109727,
   blacknh: 640,
   aiannh: 576,
   asiannh: 1081,
   nhopinh: 72,
   othernh: 202,
   twoplusnh: 1512
 },
 {
   dist: '9',
   hisp: 15794,
   whitenh: 120378,
   blacknh: 5114,
   aiannh: 763,
   asiannh: 5296,
   nhopinh: 255,
   othernh: 268,
   twoplusnh: 4803
 },
 {
   dist: '10',
   hisp: 24755,
   whitenh: 120221,
   blacknh: 8935,
   aiannh: 953,
   asiannh: 4221,
   nhopinh: 414,
   othernh: 310,
   twoplusnh: 6075
 },
 {
   dist: '11',
   hisp: 30348,
   whitenh: 72636,
   blacknh: 11707,
   aiannh: 896,
   asiannh: 2557,
   nhopinh: 449,
   othernh: 214,
   twoplusnh: 4567
 },
 {
   dist: '12',
   hisp: 20730,
   whitenh: 102140,
   blacknh: 9614,
   aiannh: 939,
   asiannh: 3680,
   nhopinh: 767,
   othernh: 271,
   twoplusnh: 5377
 },
 {
   dist: '13',
   hisp: 49258,
   whitenh: 103528,
   blacknh: 1532,
   aiannh: 707,
   asiannh: 1596,
   nhopinh: 111,
   othernh: 237,
   twoplusnh: 2108
 },
 {
   dist: '14',
   hisp: 14742,
   whitenh: 119593,
   blacknh: 1567,
   aiannh: 583,
   asiannh: 3881,
   nhopinh: 110,
   othernh: 211,
   twoplusnh: 3014
 },
 {
   dist: '15',
   hisp: 16886,
   whitenh: 133454,
   blacknh: 692,
   aiannh: 694,
   asiannh: 1794,
   nhopinh: 82,
   othernh: 136,
   twoplusnh: 2191
 },
 {
   dist: '16',
   hisp: 9140,
   whitenh: 120664,
   blacknh: 637,
   aiannh: 406,
   asiannh: 3202,
   nhopinh: 63,
   othernh: 146,
   twoplusnh: 1874
 },
 {
   dist: '17',
   hisp: 27872,
   whitenh: 104206,
   blacknh: 1072,
   aiannh: 618,
   asiannh: 4793,
   nhopinh: 62,
   othernh: 199,
   twoplusnh: 2463
 },
 {
   dist: '18',
   hisp: 9948,
   whitenh: 102972,
   blacknh: 1012,
   aiannh: 367,
   asiannh: 5208,
   nhopinh: 81,
   othernh: 233,
   twoplusnh: 2466
 },
 {
   dist: '19',
   hisp: 16350,
   whitenh: 96776,
   blacknh: 1078,
   aiannh: 482,
   asiannh: 3590,
   nhopinh: 82,
   othernh: 133,
   twoplusnh: 2005
 },
 {
   dist: '20',
   hisp: 19146,
   whitenh: 92521,
   blacknh: 1243,
   aiannh: 709,
   asiannh: 2474,
   nhopinh: 100,
   othernh: 146,
   twoplusnh: 2042
 },
 {
   dist: '21',
   hisp: 27860,
   whitenh: 83311,
   blacknh: 1751,
   aiannh: 880,
   asiannh: 3687,
   nhopinh: 114,
   othernh: 174,
   twoplusnh: 1996
 },
 {
   dist: '22',
   hisp: 11193,
   whitenh: 109994,
   blacknh: 810,
   aiannh: 433,
   asiannh: 3232,
   nhopinh: 72,
   othernh: 215,
   twoplusnh: 1893
 },
 {
   dist: '23',
   hisp: 34258,
   whitenh: 141182,
   blacknh: 1584,
   aiannh: 1090,
   asiannh: 6819,
   nhopinh: 115,
   othernh: 245,
   twoplusnh: 3105
 },
 {
   dist: '24',
   hisp: 56974,
   whitenh: 87354,
   blacknh: 2547,
   aiannh: 951,
   asiannh: 5832,
   nhopinh: 149,
   othernh: 237,
   twoplusnh: 2753
 },
 {
   dist: '25',
   hisp: 73456,
   whitenh: 90027,
   blacknh: 8365,
   aiannh: 932,
   asiannh: 4571,
   nhopinh: 242,
   othernh: 265,
   twoplusnh: 3192
 },
 {
   dist: '26',
   hisp: 15511,
   whitenh: 93342,
   blacknh: 1702,
   aiannh: 597,
   asiannh: 2278,
   nhopinh: 102,
   othernh: 142,
   twoplusnh: 2090
 },
 {
   dist: '27',
   hisp: 17452,
   whitenh: 141095,
   blacknh: 10048,
   aiannh: 503,
   asiannh: 13473,
   nhopinh: 207,
   othernh: 286,
   twoplusnh: 5121
 },
 {
   dist: '28',
   hisp: 22835,
   whitenh: 78371,
   blacknh: 17963,
   aiannh: 624,
   asiannh: 7122,
   nhopinh: 265,
   othernh: 305,
   twoplusnh: 4587
 },
 {
   dist: '29',
   hisp: 48222,
   whitenh: 44845,
   blacknh: 25608,
   aiannh: 630,
   asiannh: 5406,
   nhopinh: 453,
   othernh: 249,
   twoplusnh: 4119
 },
 {
   dist: '30',
   hisp: 14273,
   whitenh: 158347,
   blacknh: 2351,
   aiannh: 511,
   asiannh: 8934,
   nhopinh: 109,
   othernh: 228,
   twoplusnh: 3872
 },
 {
   dist: '31',
   hisp: 46662,
   whitenh: 72693,
   blacknh: 3606,
   aiannh: 910,
   asiannh: 4421,
   nhopinh: 111,
   othernh: 231,
   twoplusnh: 2268
 },
 {
   dist: '32',
   hisp: 36919,
   whitenh: 83740,
   blacknh: 2398,
   aiannh: 726,
   asiannh: 4938,
   nhopinh: 90,
   othernh: 242,
   twoplusnh: 2038
 },
 {
   dist: '33',
   hisp: 53698,
   whitenh: 57591,
   blacknh: 38437,
   aiannh: 815,
   asiannh: 5021,
   nhopinh: 202,
   othernh: 356,
   twoplusnh: 4806
 },
 {
   dist: '34',
   hisp: 68215,
   whitenh: 41103,
   blacknh: 2464,
   aiannh: 1070,
   asiannh: 2833,
   nhopinh: 61,
   othernh: 242,
   twoplusnh: 1276
 },
 {
   dist: '35',
   hisp: 18814,
   whitenh: 90289,
   blacknh: 12582,
   aiannh: 498,
   asiannh: 5890,
   nhopinh: 101,
   othernh: 277,
   twoplusnh: 3249
 },
 {
   dist: 'CO',
   hisp: 1038687,
   whitenh: 3520793,
   blacknh: 188778,
   aiannh: 31244,
   asiannh: 135564,
   nhopinh: 5661,
   othernh: 7622,
   twoplusnh: 100847
 }
];
        
var sdlu_dp = [
 {
   dist: '1',
   hisp: 24827,
   whitenh: 95252,
   blacknh: 2400,
   aiannh: 628,
   asiannh: 578,
   nhopinh: 49,
   othernh: 92,
   twoplusnh: 1336
 },
 {
   dist: '2',
   hisp: 30802,
   whitenh: 87722,
   blacknh: 3286,
   aiannh: 1297,
   asiannh: 707,
   nhopinh: 56,
   othernh: 88,
   twoplusnh: 1547
 },
 {
   dist: '3',
   hisp: 61481,
   whitenh: 73573,
   blacknh: 2583,
   aiannh: 830,
   asiannh: 1097,
   nhopinh: 103,
   othernh: 230,
   twoplusnh: 1897
 },
 {
   dist: '4',
   hisp: 14142,
   whitenh: 157815,
   blacknh: 1516,
   aiannh: 776,
   asiannh: 2668,
   nhopinh: 92,
   othernh: 275,
   twoplusnh: 3346
 },
 {
   dist: '5',
   hisp: 30520,
   whitenh: 93425,
   blacknh: 731,
   aiannh: 808,
   asiannh: 794,
   nhopinh: 65,
   othernh: 173,
   twoplusnh: 1592
 },
 {
   dist: '6',
   hisp: 19902,
   whitenh: 114977,
   blacknh: 394,
   aiannh: 6030,
   asiannh: 802,
   nhopinh: 93,
   othernh: 188,
   twoplusnh: 2406
 },
 {
   dist: '7',
   hisp: 20751,
   whitenh: 125834,
   blacknh: 777,
   aiannh: 985,
   asiannh: 1081,
   nhopinh: 163,
   othernh: 131,
   twoplusnh: 2249
 },
 {
   dist: '8',
   hisp: 34814,
   whitenh: 109783,
   blacknh: 619,
   aiannh: 593,
   asiannh: 1057,
   nhopinh: 73,
   othernh: 223,
   twoplusnh: 1520
 },
 {
   dist: '9',
   hisp: 15924,
   whitenh: 120417,
   blacknh: 5116,
   aiannh: 771,
   asiannh: 5241,
   nhopinh: 279,
   othernh: 211,
   twoplusnh: 4920
 },
 {
   dist: '10',
   hisp: 24731,
   whitenh: 120240,
   blacknh: 9034,
   aiannh: 956,
   asiannh: 4216,
   nhopinh: 410,
   othernh: 342,
   twoplusnh: 6083
 },
 {
   dist: '11',
   hisp: 30196,
   whitenh: 72645,
   blacknh: 11590,
   aiannh: 913,
   asiannh: 2602,
   nhopinh: 458,
   othernh: 274,
   twoplusnh: 4629
 },
 {
   dist: '12',
   hisp: 20652,
   whitenh: 102097,
   blacknh: 9626,
   aiannh: 949,
   asiannh: 3670,
   nhopinh: 769,
   othernh: 237,
   twoplusnh: 5247
 },
 {
   dist: '13',
   hisp: 49234,
   whitenh: 103522,
   blacknh: 1529,
   aiannh: 676,
   asiannh: 1600,
   nhopinh: 102,
   othernh: 248,
   twoplusnh: 2148
 },
 {
   dist: '14',
   hisp: 14838,
   whitenh: 119643,
   blacknh: 1579,
   aiannh: 547,
   asiannh: 3950,
   nhopinh: 117,
   othernh: 227,
   twoplusnh: 3000
 },
 {
   dist: '15',
   hisp: 16806,
   whitenh: 133465,
   blacknh: 679,
   aiannh: 724,
   asiannh: 1717,
   nhopinh: 72,
   othernh: 129,
   twoplusnh: 2135
 },
 {
   dist: '16',
   hisp: 9427,
   whitenh: 120618,
   blacknh: 637,
   aiannh: 426,
   asiannh: 3161,
   nhopinh: 79,
   othernh: 181,
   twoplusnh: 1906
 },
 {
   dist: '17',
   hisp: 27675,
   whitenh: 104172,
   blacknh: 1076,
   aiannh: 590,
   asiannh: 4772,
   nhopinh: 58,
   othernh: 202,
   twoplusnh: 2468
 },
 {
   dist: '18',
   hisp: 10069,
   whitenh: 103048,
   blacknh: 1015,
   aiannh: 352,
   asiannh: 5225,
   nhopinh: 77,
   othernh: 226,
   twoplusnh: 2403
 },
 {
   dist: '19',
   hisp: 16239,
   whitenh: 96821,
   blacknh: 1075,
   aiannh: 457,
   asiannh: 3638,
   nhopinh: 95,
   othernh: 163,
   twoplusnh: 1891
 },
 {
   dist: '20',
   hisp: 18956,
   whitenh: 92566,
   blacknh: 1271,
   aiannh: 701,
   asiannh: 2477,
   nhopinh: 91,
   othernh: 142,
   twoplusnh: 2017
 },
 {
   dist: '21',
   hisp: 27777,
   whitenh: 83154,
   blacknh: 1753,
   aiannh: 900,
   asiannh: 3726,
   nhopinh: 100,
   othernh: 156,
   twoplusnh: 2004
 },
 {
   dist: '22',
   hisp: 11440,
   whitenh: 110067,
   blacknh: 754,
   aiannh: 458,
   asiannh: 3196,
   nhopinh: 64,
   othernh: 181,
   twoplusnh: 1973
 },
 {
   dist: '23',
   hisp: 34460,
   whitenh: 141186,
   blacknh: 1607,
   aiannh: 1078,
   asiannh: 6828,
   nhopinh: 128,
   othernh: 242,
   twoplusnh: 3001
 },
 {
   dist: '24',
   hisp: 56722,
   whitenh: 87406,
   blacknh: 2526,
   aiannh: 916,
   asiannh: 5872,
   nhopinh: 154,
   othernh: 215,
   twoplusnh: 2752
 },
 {
   dist: '25',
   hisp: 73666,
   whitenh: 89959,
   blacknh: 8354,
   aiannh: 978,
   asiannh: 4539,
   nhopinh: 209,
   othernh: 287,
   twoplusnh: 3180
 },
 {
   dist: '26',
   hisp: 15754,
   whitenh: 93413,
   blacknh: 1746,
   aiannh: 602,
   asiannh: 2247,
   nhopinh: 106,
   othernh: 177,
   twoplusnh: 2490
 },
 {
   dist: '27',
   hisp: 17710,
   whitenh: 141105,
   blacknh: 10030,
   aiannh: 563,
   asiannh: 13494,
   nhopinh: 238,
   othernh: 245,
   twoplusnh: 5033
 },
 {
   dist: '28',
   hisp: 22483,
   whitenh: 78332,
   blacknh: 18000,
   aiannh: 604,
   asiannh: 7184,
   nhopinh: 265,
   othernh: 276,
   twoplusnh: 4343
 },
 {
   dist: '29',
   hisp: 47977,
   whitenh: 44832,
   blacknh: 25594,
   aiannh: 627,
   asiannh: 5356,
   nhopinh: 409,
   othernh: 285,
   twoplusnh: 3978
 },
 {
   dist: '30',
   hisp: 14176,
   whitenh: 158399,
   blacknh: 2357,
   aiannh: 508,
   asiannh: 8965,
   nhopinh: 130,
   othernh: 244,
   twoplusnh: 3735
 },
 {
   dist: '31',
   hisp: 46894,
   whitenh: 72705,
   blacknh: 3581,
   aiannh: 919,
   asiannh: 4462,
   nhopinh: 117,
   othernh: 255,
   twoplusnh: 2288
 },
 {
   dist: '32',
   hisp: 37148,
   whitenh: 83825,
   blacknh: 2419,
   aiannh: 706,
   asiannh: 4914,
   nhopinh: 106,
   othernh: 242,
   twoplusnh: 2067
 },
 {
   dist: '33',
   hisp: 53517,
   whitenh: 57454,
   blacknh: 38464,
   aiannh: 803,
   asiannh: 5018,
   nhopinh: 185,
   othernh: 378,
   twoplusnh: 4400
 },
 {
   dist: '34',
   hisp: 68015,
   whitenh: 40982,
   blacknh: 2453,
   aiannh: 1069,
   asiannh: 2836,
   nhopinh: 59,
   othernh: 227,
   twoplusnh: 1534
 },
 {
   dist: '35',
   hisp: 18927,
   whitenh: 90346,
   blacknh: 12589,
   aiannh: 529,
   asiannh: 5882,
   nhopinh: 116,
   othernh: 248,
   twoplusnh: 3298
 },
 {
   dist: 'CO',
   hisp: 1038652,
   whitenh: 3520800,
   blacknh: 188760,
   aiannh: 31269,
   asiannh: 135572,
   nhopinh: 5687,
   othernh: 7640,
   twoplusnh: 100816
 }
];
        
var sdld_data = [
 {
   dist: '1',
   chg: -92,
   hisp: -128,
   whitenh: 63,
   blacknh: 14,
   aiannh: -30,
   asiannh: -32,
   nhopinh: 6,
   othernh: 3,
   twoplusnh: 12
 },
 {
   dist: '2',
   chg: 62,
   hisp: 29,
   whitenh: -77,
   blacknh: 22,
   aiannh: -5,
   asiannh: 25,
   nhopinh: 2,
   othernh: -18,
   twoplusnh: 84
 },
 {
   dist: '3',
   chg: 283,
   hisp: 152,
   whitenh: -3,
   blacknh: 9,
   aiannh: -13,
   asiannh: -1,
   nhopinh: 16,
   othernh: 32,
   twoplusnh: 91
 },
 {
   dist: '4',
   chg: -118,
   hisp: -166,
   whitenh: -17,
   blacknh: -19,
   aiannh: -15,
   asiannh: -6,
   nhopinh: -6,
   othernh: -2,
   twoplusnh: 113
 },
 {
   dist: '5',
   chg: 152,
   hisp: 206,
   whitenh: -41,
   blacknh: -59,
   aiannh: -32,
   asiannh: -1,
   nhopinh: -7,
   othernh: 24,
   twoplusnh: 62
 },
 {
   dist: '6',
   chg: 398,
   hisp: 248,
   whitenh: 47,
   blacknh: 8,
   aiannh: 29,
   asiannh: 34,
   nhopinh: 3,
   othernh: -27,
   twoplusnh: 56
 },
 {
   dist: '7',
   chg: -515,
   hisp: -219,
   whitenh: -110,
   blacknh: 40,
   aiannh: -8,
   asiannh: -4,
   nhopinh: -36,
   othernh: -9,
   twoplusnh: -169
 },
 {
   dist: '8',
   chg: -46,
   hisp: 60,
   whitenh: -26,
   blacknh: 0,
   aiannh: 24,
   asiannh: 17,
   nhopinh: 20,
   othernh: 28,
   twoplusnh: -169
 },
 {
   dist: '9',
   chg: 12,
   hisp: 25,
   whitenh: 29,
   blacknh: 20,
   aiannh: 21,
   asiannh: -40,
   nhopinh: 4,
   othernh: 0,
   twoplusnh: -47
 },
 {
   dist: '10',
   chg: -85,
   hisp: -28,
   whitenh: -20,
   blacknh: -6,
   aiannh: -35,
   asiannh: 42,
   nhopinh: 4,
   othernh: -6,
   twoplusnh: -36
 },
 {
   dist: '11',
   chg: 72,
   hisp: -18,
   whitenh: 91,
   blacknh: 24,
   aiannh: -20,
   asiannh: -18,
   nhopinh: -22,
   othernh: -13,
   twoplusnh: 48
 },
 {
   dist: '12',
   chg: -160,
   hisp: -108,
   whitenh: -66,
   blacknh: 0,
   aiannh: 8,
   asiannh: -15,
   nhopinh: 8,
   othernh: 12,
   twoplusnh: 1
 },
 {
   dist: '13',
   chg: 129,
   hisp: 194,
   whitenh: -6,
   blacknh: -30,
   aiannh: 16,
   asiannh: -81,
   nhopinh: 4,
   othernh: 7,
   twoplusnh: 25
 },
 {
   dist: '14',
   chg: -110,
   hisp: 47,
   whitenh: 29,
   blacknh: -28,
   aiannh: -26,
   asiannh: -30,
   nhopinh: -10,
   othernh: -45,
   twoplusnh: -47
 },
 {
   dist: '15',
   chg: -113,
   hisp: -66,
   whitenh: 0,
   blacknh: 50,
   aiannh: 12,
   asiannh: -29,
   nhopinh: -11,
   othernh: 20,
   twoplusnh: -89
 },
 {
   dist: '16',
   chg: 196,
   hisp: -5,
   whitenh: 1,
   blacknh: -1,
   aiannh: 12,
   asiannh: 9,
   nhopinh: 29,
   othernh: 7,
   twoplusnh: 144
 },
 {
   dist: '17',
   chg: -460,
   hisp: -174,
   whitenh: 16,
   blacknh: -59,
   aiannh: -14,
   asiannh: 3,
   nhopinh: -11,
   othernh: 34,
   twoplusnh: -255
 },
 {
   dist: '18',
   chg: 327,
   hisp: 64,
   whitenh: -6,
   blacknh: -50,
   aiannh: 32,
   asiannh: 31,
   nhopinh: 18,
   othernh: 5,
   twoplusnh: 233
 },
 {
   dist: '19',
   chg: -318,
   hisp: -315,
   whitenh: 24,
   blacknh: 42,
   aiannh: -14,
   asiannh: 14,
   nhopinh: -22,
   othernh: -14,
   twoplusnh: -33
 },
 {
   dist: '20',
   chg: 127,
   hisp: 114,
   whitenh: -37,
   blacknh: 42,
   aiannh: -23,
   asiannh: 7,
   nhopinh: 19,
   othernh: -3,
   twoplusnh: 8
 },
 {
   dist: '21',
   chg: 352,
   hisp: 232,
   whitenh: -12,
   blacknh: 21,
   aiannh: 42,
   asiannh: 3,
   nhopinh: 14,
   othernh: 2,
   twoplusnh: 50
 },
 {
   dist: '22',
   chg: 25,
   hisp: 10,
   whitenh: 18,
   blacknh: -14,
   aiannh: 36,
   asiannh: -9,
   nhopinh: 9,
   othernh: 0,
   twoplusnh: -25
 },
 {
   dist: '23',
   chg: -104,
   hisp: -54,
   whitenh: -30,
   blacknh: -16,
   aiannh: 12,
   asiannh: -29,
   nhopinh: -9,
   othernh: 26,
   twoplusnh: -4
 },
 {
   dist: '24',
   chg: -16,
   hisp: -109,
   whitenh: 49,
   blacknh: -11,
   aiannh: -32,
   asiannh: 37,
   nhopinh: -11,
   othernh: -4,
   twoplusnh: 65
 },
 {
   dist: '25',
   chg: 252,
   hisp: 224,
   whitenh: 6,
   blacknh: 19,
   aiannh: -29,
   asiannh: -22,
   nhopinh: 8,
   othernh: 31,
   twoplusnh: 15
 },
 {
   dist: '26',
   chg: 6,
   hisp: 24,
   whitenh: -103,
   blacknh: 23,
   aiannh: -8,
   asiannh: 53,
   nhopinh: -7,
   othernh: -27,
   twoplusnh: 51
 },
 {
   dist: '27',
   chg: -56,
   hisp: -107,
   whitenh: 52,
   blacknh: 41,
   aiannh: 8,
   asiannh: -24,
   nhopinh: 2,
   othernh: 28,
   twoplusnh: -56
 },
 {
   dist: '28',
   chg: 57,
   hisp: 63,
   whitenh: 24,
   blacknh: -46,
   aiannh: 37,
   asiannh: -2,
   nhopinh: -9,
   othernh: -46,
   twoplusnh: 36
 },
 {
   dist: '29',
   chg: -170,
   hisp: -70,
   whitenh: -34,
   blacknh: -7,
   aiannh: -21,
   asiannh: 47,
   nhopinh: 15,
   othernh: 3,
   twoplusnh: -103
 },
 {
   dist: '30',
   chg: -30,
   hisp: 153,
   whitenh: -61,
   blacknh: -18,
   aiannh: 17,
   asiannh: -14,
   nhopinh: -47,
   othernh: 16,
   twoplusnh: -76
 },
 {
   dist: '31',
   chg: -97,
   hisp: -70,
   whitenh: 16,
   blacknh: -8,
   aiannh: -34,
   asiannh: 18,
   nhopinh: 22,
   othernh: 2,
   twoplusnh: -43
 },
 {
   dist: '32',
   chg: 78,
   hisp: -56,
   whitenh: 18,
   blacknh: -17,
   aiannh: 37,
   asiannh: 11,
   nhopinh: 1,
   othernh: -5,
   twoplusnh: 89
 },
 {
   dist: '33',
   chg: 53,
   hisp: 89,
   whitenh: 32,
   blacknh: 25,
   aiannh: -9,
   asiannh: 17,
   nhopinh: 8,
   othernh: 9,
   twoplusnh: -118
 },
 {
   dist: '34',
   chg: -31,
   hisp: -70,
   whitenh: 21,
   blacknh: -3,
   aiannh: -19,
   asiannh: 30,
   nhopinh: 0,
   othernh: -19,
   twoplusnh: 29
 },
 {
   dist: '35',
   chg: 64,
   hisp: 68,
   whitenh: -3,
   blacknh: 6,
   aiannh: 21,
   asiannh: -8,
   nhopinh: 13,
   othernh: -13,
   twoplusnh: -20
 },
 {
   dist: '36',
   chg: -375,
   hisp: -182,
   whitenh: 29,
   blacknh: -25,
   aiannh: -23,
   asiannh: 23,
   nhopinh: -5,
   othernh: -24,
   twoplusnh: -168
 },
 {
   dist: '37',
   chg: 381,
   hisp: 170,
   whitenh: 18,
   blacknh: 49,
   aiannh: 13,
   asiannh: -61,
   nhopinh: -10,
   othernh: 19,
   twoplusnh: 183
 },
 {
   dist: '38',
   chg: 592,
   hisp: 219,
   whitenh: 64,
   blacknh: -10,
   aiannh: -6,
   asiannh: 4,
   nhopinh: 19,
   othernh: 7,
   twoplusnh: 295
 },
 {
   dist: '39',
   chg: 85,
   hisp: 177,
   whitenh: -6,
   blacknh: 36,
   aiannh: 40,
   asiannh: 9,
   nhopinh: 16,
   othernh: -22,
   twoplusnh: -165
 },
 {
   dist: '40',
   chg: -365,
   hisp: -186,
   whitenh: -12,
   blacknh: -29,
   aiannh: 42,
   asiannh: 13,
   nhopinh: -29,
   othernh: -10,
   twoplusnh: -154
 },
 {
   dist: '41',
   chg: -263,
   hisp: -213,
   whitenh: -27,
   blacknh: 53,
   aiannh: -2,
   asiannh: 15,
   nhopinh: 29,
   othernh: -6,
   twoplusnh: -112
 },
 {
   dist: '42',
   chg: -187,
   hisp: -99,
   whitenh: -13,
   blacknh: -42,
   aiannh: -2,
   asiannh: 0,
   nhopinh: -47,
   othernh: 30,
   twoplusnh: -14
 },
 {
   dist: '43',
   chg: -82,
   hisp: -75,
   whitenh: 1,
   blacknh: 25,
   aiannh: 2,
   asiannh: 32,
   nhopinh: 22,
   othernh: 3,
   twoplusnh: -92
 },
 {
   dist: '44',
   chg: 3,
   hisp: -8,
   whitenh: 23,
   blacknh: -16,
   aiannh: -5,
   asiannh: -10,
   nhopinh: 0,
   othernh: 19,
   twoplusnh: 0
 },
 {
   dist: '45',
   chg: 73,
   hisp: 4,
   whitenh: 56,
   blacknh: -19,
   aiannh: 27,
   asiannh: 9,
   nhopinh: -24,
   othernh: -22,
   twoplusnh: 42
 },
 {
   dist: '46',
   chg: 87,
   hisp: 33,
   whitenh: 0,
   blacknh: 4,
   aiannh: -8,
   asiannh: 13,
   nhopinh: 16,
   othernh: 28,
   twoplusnh: 1
 },
 {
   dist: '47',
   chg: -78,
   hisp: 16,
   whitenh: -12,
   blacknh: -26,
   aiannh: 0,
   asiannh: 4,
   nhopinh: -22,
   othernh: -16,
   twoplusnh: -22
 },
 {
   dist: '48',
   chg: 282,
   hisp: 226,
   whitenh: 51,
   blacknh: -5,
   aiannh: 32,
   asiannh: 2,
   nhopinh: 8,
   othernh: -10,
   twoplusnh: -22
 },
 {
   dist: '49',
   chg: 69,
   hisp: 28,
   whitenh: 27,
   blacknh: 10,
   aiannh: 27,
   asiannh: -7,
   nhopinh: -5,
   othernh: -5,
   twoplusnh: -6
 },
 {
   dist: '50',
   chg: -219,
   hisp: -233,
   whitenh: -60,
   blacknh: 17,
   aiannh: -26,
   asiannh: 6,
   nhopinh: -2,
   othernh: -14,
   twoplusnh: 93
 },
 {
   dist: '51',
   chg: -160,
   hisp: -18,
   whitenh: -17,
   blacknh: -6,
   aiannh: -10,
   asiannh: -42,
   nhopinh: -19,
   othernh: 14,
   twoplusnh: -62
 },
 {
   dist: '52',
   chg: 273,
   hisp: 78,
   whitenh: -43,
   blacknh: -12,
   aiannh: 7,
   asiannh: 80,
   nhopinh: 32,
   othernh: 32,
   twoplusnh: 99
 },
 {
   dist: '53',
   chg: -102,
   hisp: -3,
   whitenh: 95,
   blacknh: 17,
   aiannh: -47,
   asiannh: -32,
   nhopinh: -10,
   othernh: -13,
   twoplusnh: -109
 },
 {
   dist: '54',
   chg: 65,
   hisp: -99,
   whitenh: 117,
   blacknh: -28,
   aiannh: 34,
   asiannh: 1,
   nhopinh: 14,
   othernh: 2,
   twoplusnh: 24
 },
 {
   dist: '55',
   chg: -46,
   hisp: 22,
   whitenh: -55,
   blacknh: 20,
   aiannh: 9,
   asiannh: -9,
   nhopinh: -5,
   othernh: -4,
   twoplusnh: -24
 },
 {
   dist: '56',
   chg: 20,
   hisp: 84,
   whitenh: -19,
   blacknh: -25,
   aiannh: -7,
   asiannh: 14,
   nhopinh: -5,
   othernh: 4,
   twoplusnh: -26
 },
 {
   dist: '57',
   chg: 43,
   hisp: 4,
   whitenh: 62,
   blacknh: -23,
   aiannh: 14,
   asiannh: -2,
   nhopinh: -15,
   othernh: 2,
   twoplusnh: 1
 },
 {
   dist: '58',
   chg: 4,
   hisp: -132,
   whitenh: -1,
   blacknh: 14,
   aiannh: 60,
   asiannh: -1,
   nhopinh: 3,
   othernh: 3,
   twoplusnh: 58
 },
 {
   dist: '59',
   chg: -29,
   hisp: -106,
   whitenh: -7,
   blacknh: -11,
   aiannh: 4,
   asiannh: 18,
   nhopinh: 16,
   othernh: 13,
   twoplusnh: 44
 },
 {
   dist: '60',
   chg: 21,
   hisp: -16,
   whitenh: 135,
   blacknh: -15,
   aiannh: -15,
   asiannh: -50,
   nhopinh: 5,
   othernh: -10,
   twoplusnh: -13
 },
 {
   dist: '61',
   chg: -57,
   hisp: -84,
   whitenh: -6,
   blacknh: 0,
   aiannh: 16,
   asiannh: -12,
   nhopinh: 19,
   othernh: 1,
   twoplusnh: 9
 },
 {
   dist: '62',
   chg: -52,
   hisp: 33,
   whitenh: -154,
   blacknh: 27,
   aiannh: -68,
   asiannh: -9,
   nhopinh: 8,
   othernh: -15,
   twoplusnh: 126
 },
 {
   dist: '63',
   chg: 7,
   hisp: -20,
   whitenh: 21,
   blacknh: -23,
   aiannh: -2,
   asiannh: -24,
   nhopinh: 6,
   othernh: -14,
   twoplusnh: 63
 },
 {
   dist: '64',
   chg: -1,
   hisp: 95,
   whitenh: -119,
   blacknh: 21,
   aiannh: -48,
   asiannh: 8,
   nhopinh: 4,
   othernh: -24,
   twoplusnh: 62
 },
 {
   dist: '65',
   chg: -113,
   hisp: 11,
   whitenh: -25,
   blacknh: -10,
   aiannh: -10,
   asiannh: -17,
   nhopinh: -10,
   othernh: 12,
   twoplusnh: -64
 },
 {
   dist: 'CO',
   chg: 0,
   hisp: -35,
   whitenh: 7,
   blacknh: -18,
   aiannh: 25,
   asiannh: 8,
   nhopinh: 26,
   othernh: 18,
   twoplusnh: -31
 }
];
        
    var sdld_sf1 =    [
 {
   dist: '1',
   hisp: 30725,
   whitenh: 32453,
   blacknh: 1121,
   aiannh: 497,
   asiannh: 3170,
   nhopinh: 64,
   othernh: 125,
   twoplusnh: 973
 },
 {
   dist: '2',
   hisp: 38585,
   whitenh: 19396,
   blacknh: 1906,
   aiannh: 537,
   asiannh: 2207,
   nhopinh: 43,
   othernh: 134,
   twoplusnh: 736
 },
 {
   dist: '3',
   hisp: 7780,
   whitenh: 55259,
   blacknh: 1230,
   aiannh: 329,
   asiannh: 2002,
   nhopinh: 53,
   othernh: 119,
   twoplusnh: 1375
 },
 {
   dist: '4',
   hisp: 30316,
   whitenh: 27484,
   blacknh: 1010,
   aiannh: 580,
   asiannh: 934,
   nhopinh: 27,
   othernh: 128,
   twoplusnh: 761
 },
 {
   dist: '5',
   hisp: 24441,
   whitenh: 39446,
   blacknh: 3876,
   aiannh: 533,
   asiannh: 1501,
   nhopinh: 46,
   othernh: 124,
   twoplusnh: 1349
 },
 {
   dist: '6',
   hisp: 8636,
   whitenh: 55307,
   blacknh: 5959,
   aiannh: 254,
   asiannh: 2671,
   nhopinh: 58,
   othernh: 143,
   twoplusnh: 1525
 },
 {
   dist: '7',
   hisp: 35645,
   whitenh: 34019,
   blacknh: 24021,
   aiannh: 440,
   asiannh: 4211,
   nhopinh: 183,
   othernh: 205,
   twoplusnh: 3075
 },
 {
   dist: '8',
   hisp: 12577,
   whitenh: 33952,
   blacknh: 13980,
   aiannh: 359,
   asiannh: 1157,
   nhopinh: 26,
   othernh: 168,
   twoplusnh: 1880
 },
 {
   dist: '9',
   hisp: 10270,
   whitenh: 43927,
   blacknh: 6360,
   aiannh: 272,
   asiannh: 3069,
   nhopinh: 47,
   othernh: 140,
   twoplusnh: 1785
 },
 {
   dist: '10',
   hisp: 5854,
   whitenh: 55337,
   blacknh: 683,
   aiannh: 242,
   asiannh: 3594,
   nhopinh: 42,
   othernh: 130,
   twoplusnh: 1390
 },
 {
   dist: '11',
   hisp: 13547,
   whitenh: 61412,
   blacknh: 572,
   aiannh: 337,
   asiannh: 2815,
   nhopinh: 54,
   othernh: 104,
   twoplusnh: 1348
 },
 {
   dist: '12',
   hisp: 14793,
   whitenh: 50751,
   blacknh: 531,
   aiannh: 284,
   asiannh: 2012,
   nhopinh: 24,
   othernh: 120,
   twoplusnh: 1251
 },
 {
   dist: '13',
   hisp: 4179,
   whitenh: 62128,
   blacknh: 398,
   aiannh: 239,
   asiannh: 1575,
   nhopinh: 40,
   othernh: 103,
   twoplusnh: 1230
 },
 {
   dist: '14',
   hisp: 7372,
   whitenh: 57566,
   blacknh: 2783,
   aiannh: 360,
   asiannh: 2307,
   nhopinh: 137,
   othernh: 114,
   twoplusnh: 2468
 },
 {
   dist: '15',
   hisp: 15644,
   whitenh: 67546,
   blacknh: 5875,
   aiannh: 506,
   asiannh: 3038,
   nhopinh: 293,
   othernh: 182,
   twoplusnh: 3827
 },
 {
   dist: '16',
   hisp: 11064,
   whitenh: 46334,
   blacknh: 3020,
   aiannh: 491,
   asiannh: 1197,
   nhopinh: 97,
   othernh: 118,
   twoplusnh: 1996
 },
 {
   dist: '17',
   hisp: 21584,
   whitenh: 36051,
   blacknh: 10553,
   aiannh: 548,
   asiannh: 2039,
   nhopinh: 524,
   othernh: 160,
   twoplusnh: 3523
 },
 {
   dist: '18',
   hisp: 11455,
   whitenh: 47954,
   blacknh: 3301,
   aiannh: 466,
   asiannh: 938,
   nhopinh: 124,
   othernh: 122,
   twoplusnh: 1931
 },
 {
   dist: '19',
   hisp: 13254,
   whitenh: 55805,
   blacknh: 6161,
   aiannh: 610,
   asiannh: 1728,
   nhopinh: 475,
   othernh: 157,
   twoplusnh: 3465
 },
 {
   dist: '20',
   hisp: 7522,
   whitenh: 89323,
   blacknh: 2238,
   aiannh: 421,
   asiannh: 3360,
   nhopinh: 108,
   othernh: 214,
   twoplusnh: 2846
 },
 {
   dist: '21',
   hisp: 6357,
   whitenh: 53630,
   blacknh: 1888,
   aiannh: 368,
   asiannh: 1908,
   nhopinh: 156,
   othernh: 87,
   twoplusnh: 1671
 },
 {
   dist: '22',
   hisp: 9082,
   whitenh: 53647,
   blacknh: 796,
   aiannh: 411,
   asiannh: 2704,
   nhopinh: 52,
   othernh: 112,
   twoplusnh: 1086
 },
 {
   dist: '23',
   hisp: 11771,
   whitenh: 49673,
   blacknh: 904,
   aiannh: 449,
   asiannh: 1780,
   nhopinh: 68,
   othernh: 71,
   twoplusnh: 1148
 },
 {
   dist: '24',
   hisp: 15246,
   whitenh: 45877,
   blacknh: 692,
   aiannh: 439,
   asiannh: 861,
   nhopinh: 60,
   othernh: 84,
   twoplusnh: 1003
 },
 {
   dist: '25',
   hisp: 3303,
   whitenh: 66857,
   blacknh: 245,
   aiannh: 199,
   asiannh: 1007,
   nhopinh: 34,
   othernh: 90,
   twoplusnh: 868
 },
 {
   dist: '26',
   hisp: 14145,
   whitenh: 46348,
   blacknh: 775,
   aiannh: 420,
   asiannh: 2084,
   nhopinh: 52,
   othernh: 121,
   twoplusnh: 1108
 },
 {
   dist: '27',
   hisp: 8320,
   whitenh: 55043,
   blacknh: 457,
   aiannh: 256,
   asiannh: 1167,
   nhopinh: 32,
   othernh: 63,
   twoplusnh: 1014
 },
 {
   dist: '28',
   hisp: 5802,
   whitenh: 57464,
   blacknh: 420,
   aiannh: 198,
   asiannh: 1448,
   nhopinh: 40,
   othernh: 93,
   twoplusnh: 1044
 },
 {
   dist: '29',
   hisp: 8763,
   whitenh: 52005,
   blacknh: 712,
   aiannh: 265,
   asiannh: 2623,
   nhopinh: 51,
   othernh: 79,
   twoplusnh: 1232
 },
 {
   dist: '30',
   hisp: 35710,
   whitenh: 35950,
   blacknh: 6395,
   aiannh: 460,
   asiannh: 1881,
   nhopinh: 180,
   othernh: 121,
   twoplusnh: 1495
 },
 {
   dist: '31',
   hisp: 22182,
   whitenh: 69455,
   blacknh: 1600,
   aiannh: 529,
   asiannh: 4524,
   nhopinh: 93,
   othernh: 139,
   twoplusnh: 2113
 },
 {
   dist: '32',
   hisp: 47931,
   whitenh: 44761,
   blacknh: 2171,
   aiannh: 531,
   asiannh: 2344,
   nhopinh: 58,
   othernh: 154,
   twoplusnh: 1569
 },
 {
   dist: '33',
   hisp: 10125,
   whitenh: 74276,
   blacknh: 935,
   aiannh: 364,
   asiannh: 6207,
   nhopinh: 65,
   othernh: 127,
   twoplusnh: 1962
 },
 {
   dist: '34',
   hisp: 29673,
   whitenh: 37579,
   blacknh: 989,
   aiannh: 413,
   asiannh: 2825,
   nhopinh: 80,
   othernh: 121,
   twoplusnh: 1058
 },
 {
   dist: '35',
   hisp: 29731,
   whitenh: 31368,
   blacknh: 780,
   aiannh: 450,
   asiannh: 3132,
   nhopinh: 46,
   othernh: 116,
   twoplusnh: 873
 },
 {
   dist: '36',
   hisp: 19332,
   whitenh: 36775,
   blacknh: 14118,
   aiannh: 405,
   asiannh: 4131,
   nhopinh: 270,
   othernh: 143,
   twoplusnh: 2856
 },
 {
   dist: '37',
   hisp: 3794,
   whitenh: 55043,
   blacknh: 638,
   aiannh: 183,
   asiannh: 1744,
   nhopinh: 48,
   othernh: 80,
   twoplusnh: 1115
 },
 {
   dist: '38',
   hisp: 7956,
   whitenh: 57213,
   blacknh: 1050,
   aiannh: 296,
   asiannh: 2210,
   nhopinh: 37,
   othernh: 78,
   twoplusnh: 1249
 },
 {
   dist: '39',
   hisp: 10525,
   whitenh: 74541,
   blacknh: 6910,
   aiannh: 273,
   asiannh: 8910,
   nhopinh: 118,
   othernh: 160,
   twoplusnh: 3155
 },
 {
   dist: '40',
   hisp: 11564,
   whitenh: 71510,
   blacknh: 6201,
   aiannh: 425,
   asiannh: 4185,
   nhopinh: 172,
   othernh: 156,
   twoplusnh: 2850
 },
 {
   dist: '41',
   hisp: 14446,
   whitenh: 39392,
   blacknh: 13167,
   aiannh: 299,
   asiannh: 4086,
   nhopinh: 91,
   othernh: 193,
   twoplusnh: 2414
 },
 {
   dist: '42',
   hisp: 31142,
   whitenh: 20293,
   blacknh: 12657,
   aiannh: 356,
   asiannh: 2505,
   nhopinh: 271,
   othernh: 133,
   twoplusnh: 1967
 },
 {
   dist: '43',
   hisp: 6288,
   whitenh: 73223,
   blacknh: 988,
   aiannh: 229,
   asiannh: 4749,
   nhopinh: 36,
   othernh: 123,
   twoplusnh: 1775
 },
 {
   dist: '44',
   hisp: 8422,
   whitenh: 94263,
   blacknh: 1442,
   aiannh: 312,
   asiannh: 4315,
   nhopinh: 75,
   othernh: 111,
   twoplusnh: 2230
 },
 {
   dist: '45',
   hisp: 7976,
   whitenh: 96959,
   blacknh: 919,
   aiannh: 429,
   asiannh: 1654,
   nhopinh: 84,
   othernh: 168,
   twoplusnh: 2045
 },
 {
   dist: '46',
   hisp: 30931,
   whitenh: 31345,
   blacknh: 1394,
   aiannh: 415,
   asiannh: 383,
   nhopinh: 50,
   othernh: 110,
   twoplusnh: 834
 },
 {
   dist: '47',
   hisp: 22938,
   whitenh: 52650,
   blacknh: 2354,
   aiannh: 666,
   asiannh: 747,
   nhopinh: 61,
   othernh: 111,
   twoplusnh: 1075
 },
 {
   dist: '48',
   hisp: 22629,
   whitenh: 85123,
   blacknh: 545,
   aiannh: 389,
   asiannh: 1598,
   nhopinh: 54,
   othernh: 140,
   twoplusnh: 1626
 },
 {
   dist: '49',
   hisp: 7347,
   whitenh: 73313,
   blacknh: 343,
   aiannh: 341,
   asiannh: 1078,
   nhopinh: 46,
   othernh: 83,
   twoplusnh: 1189
 },
 {
   dist: '50',
   hisp: 35527,
   whitenh: 39135,
   blacknh: 1207,
   aiannh: 392,
   asiannh: 880,
   nhopinh: 68,
   othernh: 171,
   twoplusnh: 1012
 },
 {
   dist: '51',
   hisp: 9036,
   whitenh: 68458,
   blacknh: 382,
   aiannh: 363,
   asiannh: 791,
   nhopinh: 37,
   othernh: 53,
   twoplusnh: 1133
 },
 {
   dist: '52',
   hisp: 10566,
   whitenh: 65525,
   blacknh: 678,
   aiannh: 335,
   asiannh: 1952,
   nhopinh: 37,
   othernh: 114,
   twoplusnh: 1429
 },
 {
   dist: '53',
   hisp: 6158,
   whitenh: 58319,
   blacknh: 908,
   aiannh: 293,
   asiannh: 1981,
   nhopinh: 76,
   othernh: 103,
   twoplusnh: 1658
 },
 {
   dist: '54',
   hisp: 11678,
   whitenh: 71723,
   blacknh: 418,
   aiannh: 548,
   asiannh: 518,
   nhopinh: 76,
   othernh: 94,
   twoplusnh: 1236
 },
 {
   dist: '55',
   hisp: 11175,
   whitenh: 65191,
   blacknh: 476,
   aiannh: 462,
   asiannh: 645,
   nhopinh: 79,
   othernh: 58,
   twoplusnh: 1219
 },
 {
   dist: '56',
   hisp: 19903,
   whitenh: 57111,
   blacknh: 451,
   aiannh: 221,
   asiannh: 715,
   nhopinh: 32,
   othernh: 126,
   twoplusnh: 679
 },
 {
   dist: '57',
   hisp: 9986,
   whitenh: 66235,
   blacknh: 316,
   aiannh: 438,
   asiannh: 447,
   nhopinh: 59,
   othernh: 68,
   twoplusnh: 988
 },
 {
   dist: '58',
   hisp: 10956,
   whitenh: 63753,
   blacknh: 178,
   aiannh: 1964,
   asiannh: 375,
   nhopinh: 47,
   othernh: 99,
   twoplusnh: 1063
 },
 {
   dist: '59',
   hisp: 10229,
   whitenh: 61939,
   blacknh: 243,
   aiannh: 4062,
   asiannh: 452,
   nhopinh: 41,
   othernh: 94,
   twoplusnh: 1371
 },
 {
   dist: '60',
   hisp: 5905,
   whitenh: 63222,
   blacknh: 737,
   aiannh: 633,
   asiannh: 443,
   nhopinh: 16,
   othernh: 45,
   twoplusnh: 1007
 },
 {
   dist: '61',
   hisp: 16981,
   whitenh: 60474,
   blacknh: 295,
   aiannh: 241,
   asiannh: 660,
   nhopinh: 27,
   othernh: 109,
   twoplusnh: 850
 },
 {
   dist: '62',
   hisp: 35688,
   whitenh: 27811,
   blacknh: 514,
   aiannh: 553,
   asiannh: 293,
   nhopinh: 23,
   othernh: 129,
   twoplusnh: 712
 },
 {
   dist: '63',
   hisp: 16544,
   whitenh: 49887,
   blacknh: 1889,
   aiannh: 357,
   asiannh: 326,
   nhopinh: 25,
   othernh: 56,
   twoplusnh: 625
 },
 {
   dist: '64',
   hisp: 22969,
   whitenh: 37729,
   blacknh: 871,
   aiannh: 526,
   asiannh: 349,
   nhopinh: 24,
   othernh: 64,
   twoplusnh: 647
 },
 {
   dist: '65',
   hisp: 16712,
   whitenh: 57255,
   blacknh: 1152,
   aiannh: 781,
   asiannh: 422,
   nhopinh: 49,
   othernh: 62,
   twoplusnh: 860
 },
 {
   dist: 'CO',
   hisp: 1038687,
   whitenh: 3520793,
   blacknh: 188778,
   aiannh: 31244,
   asiannh: 135564,
   nhopinh: 5661,
   othernh: 7622,
   twoplusnh: 100847
 }
];
        
var sdld_dp = [
 {
   dist: '1',
   hisp: 30597,
   whitenh: 32516,
   blacknh: 1135,
   aiannh: 467,
   asiannh: 3138,
   nhopinh: 70,
   othernh: 128,
   twoplusnh: 985
 },
 {
   dist: '2',
   hisp: 38614,
   whitenh: 19319,
   blacknh: 1928,
   aiannh: 532,
   asiannh: 2232,
   nhopinh: 45,
   othernh: 116,
   twoplusnh: 820
 },
 {
   dist: '3',
   hisp: 7932,
   whitenh: 55256,
   blacknh: 1239,
   aiannh: 316,
   asiannh: 2001,
   nhopinh: 69,
   othernh: 151,
   twoplusnh: 1466
 },
 {
   dist: '4',
   hisp: 30150,
   whitenh: 27467,
   blacknh: 991,
   aiannh: 565,
   asiannh: 928,
   nhopinh: 21,
   othernh: 126,
   twoplusnh: 874
 },
 {
   dist: '5',
   hisp: 24647,
   whitenh: 39405,
   blacknh: 3817,
   aiannh: 501,
   asiannh: 1500,
   nhopinh: 39,
   othernh: 148,
   twoplusnh: 1411
 },
 {
   dist: '6',
   hisp: 8884,
   whitenh: 55354,
   blacknh: 5967,
   aiannh: 283,
   asiannh: 2705,
   nhopinh: 61,
   othernh: 116,
   twoplusnh: 1581
 },
 {
   dist: '7',
   hisp: 35426,
   whitenh: 33909,
   blacknh: 24061,
   aiannh: 432,
   asiannh: 4207,
   nhopinh: 147,
   othernh: 196,
   twoplusnh: 2906
 },
 {
   dist: '8',
   hisp: 12637,
   whitenh: 33926,
   blacknh: 13980,
   aiannh: 383,
   asiannh: 1174,
   nhopinh: 46,
   othernh: 196,
   twoplusnh: 1711
 },
 {
   dist: '9',
   hisp: 10295,
   whitenh: 43956,
   blacknh: 6380,
   aiannh: 293,
   asiannh: 3029,
   nhopinh: 51,
   othernh: 140,
   twoplusnh: 1738
 },
 {
   dist: '10',
   hisp: 5826,
   whitenh: 55317,
   blacknh: 677,
   aiannh: 207,
   asiannh: 3636,
   nhopinh: 46,
   othernh: 124,
   twoplusnh: 1354
 },
 {
   dist: '11',
   hisp: 13529,
   whitenh: 61503,
   blacknh: 596,
   aiannh: 317,
   asiannh: 2797,
   nhopinh: 32,
   othernh: 91,
   twoplusnh: 1396
 },
 {
   dist: '12',
   hisp: 14685,
   whitenh: 50685,
   blacknh: 531,
   aiannh: 292,
   asiannh: 1997,
   nhopinh: 32,
   othernh: 132,
   twoplusnh: 1252
 },
 {
   dist: '13',
   hisp: 4373,
   whitenh: 62122,
   blacknh: 368,
   aiannh: 255,
   asiannh: 1494,
   nhopinh: 44,
   othernh: 110,
   twoplusnh: 1255
 },
 {
   dist: '14',
   hisp: 7419,
   whitenh: 57595,
   blacknh: 2755,
   aiannh: 334,
   asiannh: 2277,
   nhopinh: 127,
   othernh: 69,
   twoplusnh: 2421
 },
 {
   dist: '15',
   hisp: 15578,
   whitenh: 67546,
   blacknh: 5925,
   aiannh: 518,
   asiannh: 3009,
   nhopinh: 282,
   othernh: 202,
   twoplusnh: 3738
 },
 {
   dist: '16',
   hisp: 11059,
   whitenh: 46335,
   blacknh: 3019,
   aiannh: 503,
   asiannh: 1206,
   nhopinh: 126,
   othernh: 125,
   twoplusnh: 2140
 },
 {
   dist: '17',
   hisp: 21410,
   whitenh: 36067,
   blacknh: 10494,
   aiannh: 534,
   asiannh: 2042,
   nhopinh: 513,
   othernh: 194,
   twoplusnh: 3268
 },
 {
   dist: '18',
   hisp: 11519,
   whitenh: 47948,
   blacknh: 3251,
   aiannh: 498,
   asiannh: 969,
   nhopinh: 142,
   othernh: 127,
   twoplusnh: 2164
 },
 {
   dist: '19',
   hisp: 12939,
   whitenh: 55829,
   blacknh: 6203,
   aiannh: 596,
   asiannh: 1742,
   nhopinh: 453,
   othernh: 143,
   twoplusnh: 3432
 },
 {
   dist: '20',
   hisp: 7636,
   whitenh: 89286,
   blacknh: 2280,
   aiannh: 398,
   asiannh: 3367,
   nhopinh: 127,
   othernh: 211,
   twoplusnh: 2854
 },
 {
   dist: '21',
   hisp: 6589,
   whitenh: 53618,
   blacknh: 1909,
   aiannh: 410,
   asiannh: 1911,
   nhopinh: 170,
   othernh: 89,
   twoplusnh: 1721
 },
 {
   dist: '22',
   hisp: 9092,
   whitenh: 53665,
   blacknh: 782,
   aiannh: 447,
   asiannh: 2695,
   nhopinh: 61,
   othernh: 112,
   twoplusnh: 1061
 },
 {
   dist: '23',
   hisp: 11717,
   whitenh: 49643,
   blacknh: 888,
   aiannh: 461,
   asiannh: 1751,
   nhopinh: 59,
   othernh: 97,
   twoplusnh: 1144
 },
 {
   dist: '24',
   hisp: 15137,
   whitenh: 45926,
   blacknh: 681,
   aiannh: 407,
   asiannh: 898,
   nhopinh: 49,
   othernh: 80,
   twoplusnh: 1068
 },
 {
   dist: '25',
   hisp: 3527,
   whitenh: 66863,
   blacknh: 264,
   aiannh: 170,
   asiannh: 985,
   nhopinh: 42,
   othernh: 121,
   twoplusnh: 883
 },
 {
   dist: '26',
   hisp: 14169,
   whitenh: 46245,
   blacknh: 798,
   aiannh: 412,
   asiannh: 2137,
   nhopinh: 45,
   othernh: 94,
   twoplusnh: 1159
 },
 {
   dist: '27',
   hisp: 8213,
   whitenh: 55095,
   blacknh: 498,
   aiannh: 264,
   asiannh: 1143,
   nhopinh: 34,
   othernh: 91,
   twoplusnh: 958
 },
 {
   dist: '28',
   hisp: 5865,
   whitenh: 57488,
   blacknh: 374,
   aiannh: 235,
   asiannh: 1446,
   nhopinh: 31,
   othernh: 47,
   twoplusnh: 1080
 },
 {
   dist: '29',
   hisp: 8693,
   whitenh: 51971,
   blacknh: 705,
   aiannh: 244,
   asiannh: 2670,
   nhopinh: 66,
   othernh: 82,
   twoplusnh: 1129
 },
 {
   dist: '30',
   hisp: 35863,
   whitenh: 35889,
   blacknh: 6377,
   aiannh: 477,
   asiannh: 1867,
   nhopinh: 133,
   othernh: 137,
   twoplusnh: 1419
 },
 {
   dist: '31',
   hisp: 22112,
   whitenh: 69471,
   blacknh: 1592,
   aiannh: 495,
   asiannh: 4542,
   nhopinh: 115,
   othernh: 141,
   twoplusnh: 2070
 },
 {
   dist: '32',
   hisp: 47875,
   whitenh: 44779,
   blacknh: 2154,
   aiannh: 568,
   asiannh: 2355,
   nhopinh: 59,
   othernh: 149,
   twoplusnh: 1658
 },
 {
   dist: '33',
   hisp: 10214,
   whitenh: 74308,
   blacknh: 960,
   aiannh: 355,
   asiannh: 6224,
   nhopinh: 73,
   othernh: 136,
   twoplusnh: 1844
 },
 {
   dist: '34',
   hisp: 29603,
   whitenh: 37600,
   blacknh: 986,
   aiannh: 394,
   asiannh: 2855,
   nhopinh: 80,
   othernh: 102,
   twoplusnh: 1087
 },
 {
   dist: '35',
   hisp: 29799,
   whitenh: 31365,
   blacknh: 786,
   aiannh: 471,
   asiannh: 3124,
   nhopinh: 59,
   othernh: 103,
   twoplusnh: 853
 },
 {
   dist: '36',
   hisp: 19150,
   whitenh: 36804,
   blacknh: 14093,
   aiannh: 382,
   asiannh: 4154,
   nhopinh: 265,
   othernh: 119,
   twoplusnh: 2688
 },
 {
   dist: '37',
   hisp: 3964,
   whitenh: 55061,
   blacknh: 687,
   aiannh: 196,
   asiannh: 1683,
   nhopinh: 38,
   othernh: 99,
   twoplusnh: 1298
 },
 {
   dist: '38',
   hisp: 8175,
   whitenh: 57277,
   blacknh: 1040,
   aiannh: 290,
   asiannh: 2214,
   nhopinh: 56,
   othernh: 85,
   twoplusnh: 1544
 },
 {
   dist: '39',
   hisp: 10702,
   whitenh: 74535,
   blacknh: 6946,
   aiannh: 313,
   asiannh: 8919,
   nhopinh: 134,
   othernh: 138,
   twoplusnh: 2990
 },
 {
   dist: '40',
   hisp: 11378,
   whitenh: 71498,
   blacknh: 6172,
   aiannh: 467,
   asiannh: 4198,
   nhopinh: 143,
   othernh: 146,
   twoplusnh: 2696
 },
 {
   dist: '41',
   hisp: 14233,
   whitenh: 39365,
   blacknh: 13220,
   aiannh: 297,
   asiannh: 4101,
   nhopinh: 120,
   othernh: 187,
   twoplusnh: 2302
 },
 {
   dist: '42',
   hisp: 31043,
   whitenh: 20280,
   blacknh: 12615,
   aiannh: 354,
   asiannh: 2505,
   nhopinh: 224,
   othernh: 163,
   twoplusnh: 1953
 },
 {
   dist: '43',
   hisp: 6213,
   whitenh: 73224,
   blacknh: 1013,
   aiannh: 231,
   asiannh: 4781,
   nhopinh: 58,
   othernh: 126,
   twoplusnh: 1683
 },
 {
   dist: '44',
   hisp: 8414,
   whitenh: 94286,
   blacknh: 1426,
   aiannh: 307,
   asiannh: 4305,
   nhopinh: 75,
   othernh: 130,
   twoplusnh: 2230
 },
 {
   dist: '45',
   hisp: 7980,
   whitenh: 97015,
   blacknh: 900,
   aiannh: 456,
   asiannh: 1663,
   nhopinh: 60,
   othernh: 146,
   twoplusnh: 2087
 },
 {
   dist: '46',
   hisp: 30964,
   whitenh: 31345,
   blacknh: 1398,
   aiannh: 407,
   asiannh: 396,
   nhopinh: 66,
   othernh: 138,
   twoplusnh: 835
 },
 {
   dist: '47',
   hisp: 22954,
   whitenh: 52638,
   blacknh: 2328,
   aiannh: 666,
   asiannh: 751,
   nhopinh: 39,
   othernh: 95,
   twoplusnh: 1053
 },
 {
   dist: '48',
   hisp: 22855,
   whitenh: 85174,
   blacknh: 540,
   aiannh: 421,
   asiannh: 1600,
   nhopinh: 62,
   othernh: 130,
   twoplusnh: 1604
 },
 {
   dist: '49',
   hisp: 7375,
   whitenh: 73340,
   blacknh: 353,
   aiannh: 368,
   asiannh: 1071,
   nhopinh: 41,
   othernh: 78,
   twoplusnh: 1183
 },
 {
   dist: '50',
   hisp: 35294,
   whitenh: 39075,
   blacknh: 1224,
   aiannh: 366,
   asiannh: 886,
   nhopinh: 66,
   othernh: 157,
   twoplusnh: 1105
 },
 {
   dist: '51',
   hisp: 9018,
   whitenh: 68441,
   blacknh: 376,
   aiannh: 353,
   asiannh: 749,
   nhopinh: 18,
   othernh: 67,
   twoplusnh: 1071
 },
 {
   dist: '52',
   hisp: 10644,
   whitenh: 65482,
   blacknh: 666,
   aiannh: 342,
   asiannh: 2032,
   nhopinh: 69,
   othernh: 146,
   twoplusnh: 1528
 },
 {
   dist: '53',
   hisp: 6155,
   whitenh: 58414,
   blacknh: 925,
   aiannh: 246,
   asiannh: 1949,
   nhopinh: 66,
   othernh: 90,
   twoplusnh: 1549
 },
 {
   dist: '54',
   hisp: 11579,
   whitenh: 71840,
   blacknh: 390,
   aiannh: 582,
   asiannh: 519,
   nhopinh: 90,
   othernh: 96,
   twoplusnh: 1260
 },
 {
   dist: '55',
   hisp: 11197,
   whitenh: 65136,
   blacknh: 496,
   aiannh: 471,
   asiannh: 636,
   nhopinh: 74,
   othernh: 54,
   twoplusnh: 1195
 },
 {
   dist: '56',
   hisp: 19987,
   whitenh: 57092,
   blacknh: 426,
   aiannh: 214,
   asiannh: 729,
   nhopinh: 27,
   othernh: 130,
   twoplusnh: 653
 },
 {
   dist: '57',
   hisp: 9990,
   whitenh: 66297,
   blacknh: 293,
   aiannh: 452,
   asiannh: 445,
   nhopinh: 44,
   othernh: 70,
   twoplusnh: 989
 },
 {
   dist: '58',
   hisp: 10824,
   whitenh: 63752,
   blacknh: 192,
   aiannh: 2024,
   asiannh: 374,
   nhopinh: 50,
   othernh: 102,
   twoplusnh: 1121
 },
 {
   dist: '59',
   hisp: 10123,
   whitenh: 61932,
   blacknh: 232,
   aiannh: 4066,
   asiannh: 470,
   nhopinh: 57,
   othernh: 107,
   twoplusnh: 1415
 },
 {
   dist: '60',
   hisp: 5889,
   whitenh: 63357,
   blacknh: 722,
   aiannh: 618,
   asiannh: 393,
   nhopinh: 21,
   othernh: 35,
   twoplusnh: 994
 },
 {
   dist: '61',
   hisp: 16897,
   whitenh: 60468,
   blacknh: 295,
   aiannh: 257,
   asiannh: 648,
   nhopinh: 46,
   othernh: 110,
   twoplusnh: 859
 },
 {
   dist: '62',
   hisp: 35721,
   whitenh: 27657,
   blacknh: 541,
   aiannh: 485,
   asiannh: 284,
   nhopinh: 31,
   othernh: 114,
   twoplusnh: 838
 },
 {
   dist: '63',
   hisp: 16524,
   whitenh: 49908,
   blacknh: 1866,
   aiannh: 355,
   asiannh: 302,
   nhopinh: 31,
   othernh: 42,
   twoplusnh: 688
 },
 {
   dist: '64',
   hisp: 23064,
   whitenh: 37610,
   blacknh: 892,
   aiannh: 478,
   asiannh: 357,
   nhopinh: 28,
   othernh: 40,
   twoplusnh: 709
 },
 {
   dist: '65',
   hisp: 16723,
   whitenh: 57230,
   blacknh: 1142,
   aiannh: 771,
   asiannh: 405,
   nhopinh: 39,
   othernh: 74,
   twoplusnh: 796
 },
 {
   dist: 'CO',
   hisp: 1038652,
   whitenh: 3520800,
   blacknh: 188760,
   aiannh: 31269,
   asiannh: 135572,
   nhopinh: 5687,
   othernh: 7640,
   twoplusnh: 100816
 }
];

       
      var brew = new classyBrew();
      geo = cd; 
      //var DISTNUM = "CD113FP";
      dist = "CD113";
      distnum = 7
      chgdata = cd_data;
      datasf1 = cd_sf1; 
      dataDP = cd_dp;

 
      //*************************************** Begin bar chart construction ****************************************
        var w = document.getElementById('rtSide').offsetWidth * 0.95,
        // h = w * 0.4,
        h = document.getElementById('sf1Bar').offsetHeight,
        h2 = h - 80;
        
        var svg = d3.select('#sf1Bar').append('svg')
          .attr("height", h)	
          .attr("width", w);

        var g = svg.append("g").attr("transform", "translate(40, 20)");

        var svg1 = d3.select('#dpBar').append('svg')
          .attr("height", h)	
          .attr("width", w);

        var g1 = svg1.append("g").attr("transform", "translate(40, 20)");

        var svg2 = d3.select('#diffBar').append('svg')
          .attr("height", h)	
          .attr("width", w);

        var g2 = svg2.append("g").attr("transform", "translate(40, 20)");

        var x = d3.scaleBand().range([0, w - 60]).padding(0.2),
            y = d3.scaleLinear().rangeRound([h2, 0]);

        
        var svg3 = d3.select('#chgTotal').append('svg')
          .attr("height", 20)	
          .attr("width", w);

        var g3 = svg3.append("g").attr("transform", "translate(40, 15)");
        
        function make_y_gridlines() {
		      return d3.axisLeft(y).ticks(8)
	      }

      //*************************************************************************************************************
      //* SF1 BAR CHART ******
      //*************************************************************************************************************

        var nest = d3.nest().key(function(d) {return d.dist; }).entries(datasf1); //console.log(nest);
        
        var barChart = function(geo) {
          var caNest = nest.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
          values2 = caNest[0].values; //console.log(values2[0]);
          var rate = values2[0]; //console.log(rate);

          var dsf1 = [
            {name: "Hispanic, Any Race", value:values2[0]["hisp"]},
            {name: "White, Non-Hispanic", value:values2[0]["whitenh"]},
            {name: "Black, Non-Hispanic", value:values2[0]["blacknh"]},
            {name: "American Indian/AK Non-Hispanic", value:values2[0]["aiannh"]},
            {name: "Asian Non-Hispanic", value:values2[0]["asiannh"]},
            {name: "Native Hawaiian/PI Non-Hispanic", value:values2[0]["nhopinh"]},
            {name: "Other Race Non-Hispanic", value:values2[0]["othernh"]},
            {name: "Two or More Races Non-Hispanic", value:values2[0]["twoplusnh"]},
          ]; // console.log(dsf1.length);

          res=[];
          dsf1.forEach(function(d){
            res.push(d.value);
          });

          total = d3.sum(res);
          
          x.domain(dsf1.map(function(d) {return d.name; }));
          y.domain([0, d3.max(res)]);

          g.append("g")
            .attr("class", "axis axis--x")
            .attr("transform", "translate(0," + h2 + ")")
            .call(d3.axisBottom(x))
          .selectAll(".tick text")
            .call(wrap, x.bandwidth());

          g.append("g")
            .attr("class", "axis axis--y")
            .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", "0.71em")
            .attr("text-anchor", "end");
            //.text("Percent in Poverty");

          g.selectAll(".bar")
            .data(dsf1)
            .enter().append("rect")
              .attr("class", "bar")
              .attr("x", function(d) {return x(d.name); })
              .attr("y", function(d) {return y(d.value); })
              .attr("width", x.bandwidth())
              .attr("height", function(d) {return h2 - y(d.value); })
              //.style("fill", "rgb(253,141,60)");
              .style("fill", "rgb(0,77,168)");

          g.selectAll("text.bar")
            .data(dsf1)
            .enter().append("text")
              .attr("class", "barText")
              .attr("text-anchor", "middle")
              .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
              .attr("y", function(d){return y(d.value) -5; })
              //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
              .text(function(d){ return (d.value).toLocaleString(); })
              .style("font-size", "12px");

          g.selectAll("text.lbl")
            .data([total])
            .enter().append("text")
              .attr("class", "lblText")
              //.attr("text-anchor", "left")
              .attr("x", w * 0.5)
              .attr("y", h * 0.01)
              .html(function(d) {return "Total Population 18+: "+ d.toLocaleString();})
              .style("font-size", "13px");
        };

      barChart('CO');

      //****** UPDATE SF1 BAR CHART *************************

      var updateBarChartSF1 = function(geo) {
          var nest = d3.nest().key(function(d) {return d.dist; }).entries(datasf1); //console.log(nest);
        var caNest = nest.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
        var values2 = caNest[0].values; // console.log(values2[0]);
        var rate = values2[0]; // console.log(rate);

        var dsf1 = [
          {name: "Hispanic, Any Race", value:values2[0]["hisp"]},
          {name: "White, Non-Hispanic", value:values2[0]["whitenh"]},
          {name: "Black, Non-Hispanic", value:values2[0]["blacknh"]},
          {name: "American Indian/AK Non-Hispanic", value:values2[0]["aiannh"]},
          {name: "Asian Non-Hispanic", value:values2[0]["asiannh"]},
          {name: "Native Hawaiian/PI Non-Hispanic", value:values2[0]["nhopinh"]},
          {name: "Other Race Non-Hispanic", value:values2[0]["othernh"]},
          {name: "Two or More Races Non-Hispanic", value:values2[0]["twoplusnh"]},
        ]; // console.log(dsf1.length);

        res=[];
        dsf1.forEach(function(d){
          res.push(d.value);
        });

        // alert(d3.max(res));

        totalDP = d3.sum(res);
        
        // x.domain(dDP.map(function(d) {return d.name; }));
        y.domain([0, d3.max(resDP)]);

        var bar = g.selectAll(".bar").remove().exit().data(dsf1);
        
        bar.enter().append("rect")
          .attr("class", "bar")
          .attr("x", function(d) {return x(d.name); })
          .attr("y", function(d) {return y(d.value); })
          .attr("width", x.bandwidth())
          .attr("height", function(d) {return h2 - y(d.value); })
          // .style("fill", "rgb(253,141,60)");
          .style("fill", "rgb(0,77,168)");

        barText = g.selectAll(".barText").remove().exit().data(dsf1);

        barText.enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        lblText = g.selectAll(".lblText").remove().exit().data([totalDP]);

        lblText.enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            .attr("y", h * 0.01)
            .text(function(d) {return "Total Population 18+: " + d.toLocaleString();})
            .style("font-size", "13px");

        g.selectAll(".axis--y").remove();

        g.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");
        
      };

      //*************************************************************************************************************
      //* DP BAR CHART ******
      //*************************************************************************************************************

      var nest2 = d3.nest().key(function(d) {return d.dist; }).entries(dataDP);  console.log(nest2);
        
      var barChartDP = function(geo) {
        var caNestDP = nest2.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
        values2DP = caNestDP[0].values; // console.log(values2DP[0]);
        var rateDP = values2DP[0]; // console.log(rateDP);

        var dDP = [
          {name: "Hispanic, Any Race", value:values2DP[0]["hisp"]},
          {name: "White, Non-Hispanic", value:values2DP[0]["whitenh"]},
          {name: "Black, Non-Hispanic", value:values2DP[0]["blacknh"]},
          {name: "American Indian/AK Non-Hispanic", value:values2DP[0]["aiannh"]},
          {name: "Asian Non-Hispanic", value:values2DP[0]["asiannh"]},
          {name: "Native Hawaiian/PI Non-Hispanic", value:values2DP[0]["nhopinh"]},
          {name: "Other Race Non-Hispanic", value:values2DP[0]["othernh"]},
          {name: "Two or More Races Non-Hispanic", value:values2DP[0]["twoplusnh"]},
        ]; // console.log(dDP.length);

        resDP=[];
        dDP.forEach(function(d){
          resDP.push(d.value);
        });

        totalDP = d3.sum(resDP);
        
        x.domain(dDP.map(function(d) {return d.name; }));
        y.domain([0, d3.max(resDP)]);

        g1.append("g")
          .attr("class", "axis axis--x")
          .attr("transform", "translate(0," + h2 + ")")
          .call(d3.axisBottom(x))
        .selectAll(".tick text")
          .call(wrap, x.bandwidth());

        g1.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");
          //.text("Percent in Poverty");

        g1.selectAll(".bar")
          .data(dDP)
          .enter().append("rect")
            .attr("class", "bar")
            .attr("x", function(d) {return x(d.name); })
            .attr("y", function(d) {return y(d.value); })
            .attr("width", x.bandwidth())
            .attr("height", function(d) {return h2 - y(d.value); })
            .style("fill", "rgb(253,141,60)");
            // .style("fill", "rgb(0,77,168)");

        g1.selectAll("text.bar")
          .data(dDP)
          .enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        g1.selectAll("text.lbl")
          .data([totalDP])
          .enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            .attr("y", h * 0.01)
            .text(function(d) {return "Total Population 18+: " + d.toLocaleString();})
            .style("font-size", "13px");
      };

      barChartDP('CO');

      //****** UPDATE DP BAR CHART *************************

      var updateBarChartDP = function(geo) {
        var nest2 = d3.nest().key(function(d) {return d.dist; }).entries(dataDP);  console.log(nest2);
          var caNestDP = nest2.filter(function(d) { return d.key == geo; }); //console.log(geo);
        var values2DP = caNestDP[0].values;  console.log(values2DP[0]);
        var rateDP = values2DP[0];  console.log(rateDP);

        var dDP = [
          {name: "Hispanic, Any Race", value:values2DP[0]["hisp"]},
          {name: "White, Non-Hispanic", value:values2DP[0]["whitenh"]},
          {name: "Black, Non-Hispanic", value:values2DP[0]["blacknh"]},
          {name: "American Indian/AK Non-Hispanic", value:values2DP[0]["aiannh"]},
          {name: "Asian Non-Hispanic", value:values2DP[0]["asiannh"]},
          {name: "Native Hawaiian/PI Non-Hispanic", value:values2DP[0]["nhopinh"]},
          {name: "Other Race Non-Hispanic", value:values2DP[0]["othernh"]},
          {name: "Two or More Races Non-Hispanic", value:values2DP[0]["twoplusnh"]},
        ]; // console.log(dDP.length);

        resDP=[];
        dDP.forEach(function(d){
          resDP.push(d.value);
        });

        // alert(d3.max(resDP));

        totalDP = d3.sum(resDP);
        
        // x.domain(dDP.map(function(d) {return d.name; }));
        y.domain([0, d3.max(resDP)]);

        var bar = g1.selectAll(".bar").remove().exit().data(dDP);
        
        bar.enter().append("rect")
          .attr("class", "bar")
          .attr("x", function(d) {return x(d.name); })
          .attr("y", function(d) {return y(d.value); })
          .attr("width", x.bandwidth())
          .attr("height", function(d) {return h2 - y(d.value); })
          .style("fill", "rgb(253,141,60)");

        barText = g1.selectAll(".barText").remove().exit().data(dDP);

        barText.enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        lblText = g1.selectAll(".lblText").remove().exit().data([totalDP]);

        lblText.enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            .attr("y", h * 0.01)
            .text(function(d) {return "Total Population 18+: " + d.toLocaleString();})
            .style("font-size", "13px");

        g1.selectAll(".axis--y").remove();

        g1.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");
        
      };

      //*************************************************************************************************************
      //* Difference Graph ******
      //*************************************************************************************************************

      var diffChart = function(geo) {

        var chgDP = [
            {name: "Hispanic, Any Race", value: (values2DP[0]["hisp"] - values2[0]["hisp"])},
            {name: "White, Non-Hispanic", value: (values2DP[0]["whitenh"] - values2[0]["whitenh"])},
            {name: "Black, Non-Hispanic", value: (values2DP[0]["blacknh"] - values2[0]["blacknh"])},
            {name: "American Indian/AK Non-Hispanic", value: (values2DP[0]["aiannh"] - values2[0]["aiannh"])},
            {name: "Asian Non-Hispanic", value: (values2DP[0]["asiannh"] - values2[0]["asiannh"])},
            {name: "Native Hawaiian/PI Non-Hispanic", value: (values2DP[0]["nhopinh"] - values2[0]["nhopinh"])},
            {name: "Other Race Non-Hispanic", value: (values2DP[0]["othernh"] - values2[0]["othernh"])},
            {name: "Two or More Races Non-Hispanic", value: (values2DP[0]["twoplusnh"] - values2[0]["twoplusnh"])},
        ]; // console.log(chgDP);

        resDP=[];
          chgDP.forEach(function(d){
            resDP.push(d.value);
          });

        totalDP = d3.sum(resDP);
        
        x.domain(chgDP.map(function(d) {return d.name; }));
        y.domain([d3.min(resDP), d3.max(resDP)]);

        g2.append("g")
          .attr("class", "axis axis--x")
          .attr("transform", "translate(0," + h2 + ")")
          .call(d3.axisBottom(x))
        .selectAll(".tick text")
          .call(wrap, x.bandwidth());

        g2.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");

        g2.selectAll(".bar")
          .data(chgDP)
          .enter().append("rect")
            .attr("class", function(d,i) {return d.value < 0 ? "bar negative" : "bar positive";})
            .attr("x", function(d) {return x(d.name); })
            //.attr("y", function(d) {return y(d.value); })
            .attr("y", function(d, i) {return d.value < 0 ? y(0) : y(d.value); })
            .attr("width", x.bandwidth())
            .attr("height", function(d, i) {return Math.abs(y(0) - y(d.value)); });

        g2.selectAll("text.bar")
          .data(chgDP)
          .enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        g3.selectAll("text.lbl")
          .data([totalDP])
          .enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            // .attr("y", h * 0.1)
            .text(function(d) {return "Change Population 18+: " + d.toLocaleString();})
            .style("font-size", "13px");
        
        g2.append("g")
          .attr("class","zeroLine")
          .append("line")
          .attr("x1", 0)
          .attr("x2", w)
//          .attr("width",w)
          .attr("y1", y(0))
          .attr("y2", y(0))
          .style("stroke", "#BDBDBD");

      };

      diffChart('CO');

      //****** UPDATE CHANGE BAR CHART *************************

      var updateBarChartChg = function(geo) {
var nest = d3.nest().key(function(d) {return d.dist; }).entries(datasf1); //console.log(nest);
          var nest2 = d3.nest().key(function(d) {return d.dist; }).entries(dataDP);  console.log(nest2)
        // DP data
        var caNestDP = nest2.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
        var values2DP = caNestDP[0].values; // console.log(values2DP[0]);
        var rateDP = values2DP[0]; // console.log(rateDP);

        // SF1 data
        var caNest = nest.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
        var values2 = caNest[0].values; // console.log(values2[0]);
        var rate = values2[0]; // console.log(rate);

        var chgDP = [
            {name: "Hispanic, Any Race", value: (values2DP[0]["hisp"] - values2[0]["hisp"])},
            {name: "White, Non-Hispanic", value: (values2DP[0]["whitenh"] - values2[0]["whitenh"])},
            {name: "Black, Non-Hispanic", value: (values2DP[0]["blacknh"] - values2[0]["blacknh"])},
            {name: "American Indian/AK Non-Hispanic", value: (values2DP[0]["aiannh"] - values2[0]["aiannh"])},
            {name: "Asian Non-Hispanic", value: (values2DP[0]["asiannh"] - values2[0]["asiannh"])},
            {name: "Native Hawaiian/PI Non-Hispanic", value: (values2DP[0]["nhopinh"] - values2[0]["nhopinh"])},
            {name: "Other Race Non-Hispanic", value: (values2DP[0]["othernh"] - values2[0]["othernh"])},
            {name: "Two or More Races Non-Hispanic", value: (values2DP[0]["twoplusnh"] - values2[0]["twoplusnh"])},
        ]; // console.log(chgDP);

        resDP=[];
        chgDP.forEach(function(d){
          resDP.push(d.value);
        });

        // alert(d3.max(resDP));

        totalDP = d3.sum(resDP);

        y.domain([d3.min(resDP), d3.max(resDP)]);

        var bar = g2.selectAll(".bar").remove().exit().data(chgDP);
        
        bar.enter().append("rect")
            .attr("class", function(d,i) {return d.value < 0 ? "bar negative" : "bar positive";})
            .attr("x", function(d) {return x(d.name); })
            .attr("y", function(d, i) {return d.value < 0 ? y(0) : y(d.value); })
            .attr("width", x.bandwidth())
            .attr("height", function(d, i) {return Math.abs(y(0) - y(d.value)); });

        barText = g2.selectAll(".barText").remove().exit().data(chgDP);

        barText.enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        lblText = g3.selectAll(".lblText").remove().exit().data([totalDP]);

        lblText.enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            //.attr("y", h * 0.005)
            .text(function(d) {return "Total Population Change: " + d.toLocaleString();})
            .style("font-size", "13px");

        g2.selectAll(".axis--y").remove();

        g2.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");
        
        // Zero line
        g2.select(".zeroLine").remove();

        g2.append("g")
          .attr("class","zeroLine")
          .append("line")
          .attr("x1", 0)
          .attr("x2", w)
//          .attr("width",w)
          .attr("y1", y(0))
          .attr("y2", y(0))
          .style("stroke", "white");

      }

      //*************************************************************************************************************
      //* MAP ******
      //*************************************************************************************************************

      var data1 = {},
      values=[];
      for (j=0; j<chgdata.length; j++) {
          data1[chgdata[j].dist] = chgdata[j].chg;
          values.push(chgdata[j].chg);
      }

      brew.setSeries(values);
      brew.setNumClasses(5);
      brew.classify("jenks")
      brew.setColorCode("RdYlBu")

      function mapstyle(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.5,
          fillColor: brew.getColorInRange(data1[feature.properties.DISTNUM])
        };
      }

      var map = L.map('map');

      var cartoPositron = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	      subdomains: 'abcd',
	      maxZoom: 19
      }).addTo(map);

      var layerGroup = L.layerGroup().addTo(map);

      var jLayer = L.geoJSON(geo, {
        style: mapstyle,
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.chg = chgdata[i].chg;
                feature.properties.hisp = chgdata[i].hisp;
              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.chg)
            
            // layer.on('click', function(e){
            //   // alert(e.target.feature.properties.DISTNUM);
            //   updateBarChartDP(e.target.feature.properties.DISTNUM);
            //   document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 years and Over by Race - CD "+e.target.feature.properties.DISTNUM;
            // })
          }
      }).addTo(layerGroup);

      map.fitBounds(jLayer.getBounds());

      map.on('click', function(e){
        updateBarChartDP('CO');
        updateBarChartSF1('CO');
        updateBarChartChg('CO');
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 years and Over by Race - Colorado";
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - Colorado";
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - Colorado";
        // alert('click on the map')
      })

      jLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      })

      // var popupTemplate = "<h3>Congressional District {DISTNUM}</h3><br>Total Change in the Hispanic population: {hisp}";

      // jLayer.bindPopup(function(e){
      //   console.log(e.feature.properties)
      //   return L.Util.template(popupTemplate, e.feature.properties)
      // });

      //********************************************************
      //* ADD LEGEND
      //********************************************************

      var legend = L.control({position: 'bottomleft'});

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brew.getBreaks(),
          labels = ['<strong>Total Population</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brew.getColorInRange(to) + '"></i> ' +
            from.toLocaleString(0) + ' to ' + to.toLocaleString(0));
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

    // ******************************************************************************
    // *** Map on-click
    //*******************************************************************************      
      // map.on('click', function(event) {
      //   alert(event.feature.properties);
      // })

    // ******************************************************************************
    // *** Hispanic View
    //*******************************************************************************

    hispLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].hisp;
          valuesH.push(chgdata[j].hisp);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var hLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.chg = chgdata[i].chg;
                feature.properties.hisp = chgdata[i].hisp;
              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.hisp.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Hispanic, Any Race</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);
    
      hLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }

    // ******************************************************************************
    // *** White NH View
    //*******************************************************************************

    wnhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].whitenh;
          valuesH.push(chgdata[j].whitenh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var wLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.whitenh = chgdata[i].whitenh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.whitenh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);
      console.log(wLayer);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>White, Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      wLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }

    // ******************************************************************************
    // *** Black NH View
    //*******************************************************************************

    bnhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].blacknh;
          valuesH.push(chgdata[j].blacknh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var bLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.blacknh = chgdata[i].blacknh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.blacknh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Black, Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      bLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }

    // ******************************************************************************
    // *** American Indian NH View
    //*******************************************************************************

    aiannhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].aiannh;
          valuesH.push(chgdata[j].aiannh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var AmInLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.aiannh = chgdata[i].aiannh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.aiannh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>American Indian and<br>Native Alaskan,<br>Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      AmInLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }


    // ******************************************************************************
    // *** Asian NH View
    //*******************************************************************************

    anhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].asiannh;
          valuesH.push(chgdata[j].asiannh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var aLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.asiannh = chgdata[i].asiannh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.asiannh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Asian, Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      aLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }    

    // ******************************************************************************
    // *** Native Hawaiian NH View
    //*******************************************************************************

    nhopiLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].nhopinh;
          valuesH.push(chgdata[j].nhopinh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var nhLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.nhopinh = chgdata[i].nhopinh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.nhopinh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Native Hawaiian and<br>Other Pacific Islander,<br>Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      nhLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });
    
    }    

    // ******************************************************************************
    // *** Other NH View
    //*******************************************************************************

    onhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].othernh;
          valuesH.push(chgdata[j].othernh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var oLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.othernh = chgdata[i].othernh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.othernh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Other, Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      oLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }   

    // ******************************************************************************
    // *** Two or More NH View
    //*******************************************************************************

    tomnhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].twoplusnh;
          valuesH.push(chgdata[j].twoplusnh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("quantile")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var twoLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.twoplusnh = chgdata[i].twoplusnh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.twoplusnh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Two or More Races,<br>Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      twoLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });
      
    }   

    // ******************************************************************************
    // *** Original View
    //********************************************************************************
    
    origLayer = function() {

      layerGroup.clearLayers();
$("#raceEthnicity").val("tp");
      var data1 = {},
      values=[];
      for (j=0; j<chgdata.length; j++) {
          data1[chgdata[j].dist] = chgdata[j].chg;
          values.push(chgdata[j].chg);
      }

      var brew = new classyBrew();

      brew.setSeries(values);
      brew.setNumClasses(5);
      brew.classify("jenks")
      brew.setColorCode("RdYlBu")      

      function mapstyle(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brew.getColorInRange(data1[feature.properties.DISTNUM])
        };
      }

      var origLayer = L.geoJson(geo, {
          style: mapstyle, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
             
                if (feature.properties.DISTNUM == chgdata[i].dist) { 
                  feature.properties.chg = chgdata[i].chg;
                feature.properties.hisp = chgdata[i].hisp;
                                                                    
              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.chg.toLocaleString())
             //console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brew.getBreaks(),
          labels = ['<strong>Total Population</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brew.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      origLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e); 
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }  

    // *********************************************************************
    // onchange function
    // *********************************************************************

    $("#raceEthnicity").on('change', function(){
      // console.log($(this).val());

      if ($(this).val() == 'hisp'){
        hispLayer();
      };

      if ($(this).val() == 'tp'){
        origLayer();
      };

      if ($(this).val() == 'wnh'){
        wnhLayer();
      };

      if ($(this).val() == 'bnh'){
        bnhLayer();
      };

      if ($(this).val() == 'aiannh'){
        aiannhLayer();
      };

      if ($(this).val() == 'anh'){
        anhLayer();
      };

      if ($(this).val() == 'nhpinh'){
        nhopiLayer();
      };

      if ($(this).val() == 'onh'){
        onhLayer();
      };

      if ($(this).val() == 'tomnh'){
        tomnhLayer();
      };      

    }); 
        
    $("#districtType").on('change', function(){
      // console.log($(this).val());

      if ($(this).val() == 'cd'){
        geo = cd;
        //DISTNUM = "CD113FP";
        dist = "CD113";
        distnum = 7;
        chgdata = cd_data;
        datasf1 = cd_sf1;
        dataDP = cd_dp;
          origLayer();
      };

      if ($(this).val() == 'sldu'){
        geo = sldu;
        //DISTNUM = "SLDUST";
        dist = "sldu";
        distnum = 35;
        chgdata = sldu_data;
        datasf1 = sldu_sf1;
        dataDP = sldu_dp;
        origLayer();
          
      };

      if ($(this).val() == 'sldl'){
        geo = sldl;console.log("sldl");
        //DISTNUM = "SLDLST";
        dist = "sldl";
        distnum = 65;
        chgdata = sldl_data;
        datasf1 = sldl_sf1;
        dataDP = sldl_dp;
          origLayer();
      };

    });       


    // *********************************************************************
    // Miscellaneous functions
    // *********************************************************************

    function wrap(text, width) {
	  text.each(function() {
	    var text = d3.select(this),
		words = text.text().split(/\s+/).reverse(),
		word,
		line = [],
		lineNumber = 0,
		lineHeight = 1.1, // ems
		y = text.attr("y"),
		dy = parseFloat(text.attr("dy")),
		tspan = text.text(null).append("tspan").attr("x", 0).attr("y", y).attr("dy", dy + "em")
	    while (word = words.pop()) {
	      line.push(word)
	      tspan.text(line.join(" "))
	      if (tspan.node().getComputedTextLength() > width) {
		line.pop()
		tspan.text(line.join(" "))
		line = [word]
		/* tspan = text.append("tspan").attr("x", 0).attr("y", y).attr("dy", `${++lineNumber * lineHeight + dy}em`).text(word) */
		tspan = text.append("tspan").attr("x", 0).attr("y", y).attr("dy", ++lineNumber * lineHeight + dy + "em").text(word)
	      }
	    }
	  })
	}
        
    

    </script>
  </body>
</html>
